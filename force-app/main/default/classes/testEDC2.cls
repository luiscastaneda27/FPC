@isTest
public class testEDC2 {
    static testMethod void runEDC2(){
         Account natural = new Account(FirstName = 'Juan', LastName = 'Perez', Identificacion__c = '0709199300155',
                                      RecordTypeId = [Select id From RecordType Where sObjectType = 'Account' AND DeveloperName = 'Natural'].id);
        insert natural;
        
        RecordType tiposR = [Select Name From RecordType Where sObjectType = 'Case' AND DeveloperName = 'Estados_Cuenta'];
        
        Case casoEDC = new Case(AccountId = natural.id, Status = 'Nuevo', RecordTypeId = tiposR.id, Tipo_Estado_Cuenta__c = 'A1',Estado_Cuenta_Detallado__c = 'General',
                                estado_de_cuenta__C='[{"rendimientoLempiras":"9.13%","rendimientoDolares":"5.37%","pension":"L 7,202.93","numeroCliente":"159438","nombreCliente":"TIRZA MARIBEL SOLORZANO NUÑEZ","mayor":false,"incrementoQuinceMas":"L 22,202.93","incrementoDiezMas":"L 17,202.93","incrementoCincoMas":"L 12,202.93","identificacion":"0709-1993-00155","fondoLempiras":null,"fondoDolares":null,"fecha":"22/05/2019","emailCliente":"paola.cruz@ficohsa.com","cuentas":[{"totalMiFondo":"19,422.03","retiros":"-39,422.51","porcentajeMisAportes":"41.7% ","porcentajeFicohsaAportes":"16.6% ","porcentajeEmpleadorAportes":"41.7% ","numeroCuenta":"33320","moneda":"LEMPIRAS","miEmpleador":null,"intereses":"10,602.19","grafico":"hola","fpcTrabajo":null,"fechaIncorporacion":"05/06/2015","comisiones":"-4,874.21","aportesExtraEmpleado":"22.00","aportesEmpleador":"26,547.28","aportesEmpleado":"26,547.28","aporteSeguroVida":"0.00","aporteExtraEmpleador":"0.00"},{"totalMiFondo":"3,107.69","retiros":"-10,250.00","porcentajeMisAportes":"94.8% ","porcentajeFicohsaAportes":"5.2% ","porcentajeEmpleadorAportes":"0% ","numeroCuenta":"51563","moneda":"LEMPIRAS","miEmpleador":null,"intereses":"799.69","grafico":"hola","fpcTrabajo":null,"fechaIncorporacion":"03/01/2017","comisiones":"-1,992.00","aportesExtraEmpleado":"2,000.00","aportesEmpleador":"0.00","aportesEmpleado":"12,550.00","aporteSeguroVida":"0.00","aporteExtraEmpleador":"0.00"}],"correoElectronico":"paola.cruz@ficohsa.com","aporteQuinceMas":"L 318.50","aporteDiezMas":"L 212.50","aporteCincoMas":"L 106.40"}]',
                                estado_de_cuenta_historico__C='[{"fecha":"22/05/2019","nombreCliente":"TIRZA MARIBEL SOLORZANO NUÑEZ","emailCliente":"paola.cruz@ficohsa.com","numeroCliente":"159438","movimientos":[{"moneda":" Lempiras","cuenta":"33320","totalPersonal":"19,422.33","totalPatronal":"-0.10","granTotal":"19,422.23","transacciones":[{"fecha":"01/01/2019","descripcionTransaccion":"Saldo Acumulado al 01/01/2019","aportePersonal":"25,824.30","aportePatronal":"25,828.90","aporteTotal":"51,653.20"},{"fecha":"16/01/2019","descripcionTransaccion":"Aportes Ordinarios","aportePersonal":"586.35","aportePatronal":"586.35","aporteTotal":"1,172.70"},{"fecha":"15/02/2019","descripcionTransaccion":"Aportes Ordinarios","aportePersonal":"586.35","aportePatronal":"586.35","aporteTotal":"1,172.70"},{"fecha":"14/03/2019","descripcionTransaccion":"Aportes Ordinarios","aportePersonal":"586.35","aportePatronal":"586.35","aporteTotal":"1,172.70"},{"fecha":"15/04/2019","descripcionTransaccion":"Aportes Ordinarios","aportePersonal":"618.60","aportePatronal":"618.60","aporteTotal":"1,237.20"},{"fecha":"15/05/2019","descripcionTransaccion":"Aportes Ordinarios","aportePersonal":"618.60","aportePatronal":"618.60","aporteTotal":"1,237.20"},{"fecha":"20/05/2019","descripcionTransaccion":"Retiros Ordinarios","aportePersonal":"-10,000.00","aportePatronal":"-29,422.51","aporteTotal":"-39,422.51"},{"fecha":"22/05/2019","descripcionTransaccion":"Intereses","aportePersonal":"965.30","aportePatronal":"961.12","aporteTotal":"1,926.42"},{"fecha":"22/05/2019","descripcionTransaccion":"Comisiones","aportePersonal":"-363.52","aportePatronal":"-363.86","aporteTotal":"-727.38"}]},{"moneda":" Lempiras","cuenta":"51563","totalPersonal":"3,107.81","totalPatronal":"0.00","granTotal":"3,107.81","transacciones":[{"fecha":"01/01/2019","descripcionTransaccion":"Saldo Acumulado al 01/01/2019","aportePersonal":"6,760.12","aportePatronal":"0.00","aporteTotal":"6,760.12"},{"fecha":"08/01/2019","descripcionTransaccion":"Retiros Ordinarios","aportePersonal":"-4,781.00","aportePatronal":"0.00","aporteTotal":"-4,781.00"},{"fecha":"08/01/2019","descripcionTransaccion":"Retiros Extraordinarios","aportePersonal":"-1,219.00","aportePatronal":"0.00","aporteTotal":"-1,219.00"},{"fecha":"14/01/2019","descripcionTransaccion":"Aportes Ordinarios","aportePersonal":"500.00","aportePatronal":"0.00","aporteTotal":"500.00"},{"fecha":"11/02/2019","descripcionTransaccion":"Aportes Ordinarios","aportePersonal":"500.00","aportePatronal":"0.00","aporteTotal":"500.00"},{"fecha":"12/03/2019","descripcionTransaccion":"Aportes Ordinarios","aportePersonal":"500.00","aportePatronal":"0.00","aporteTotal":"500.00"},{"fecha":"10/05/2019","descripcionTransaccion":"Aportes Ordinarios","aportePersonal":"500.00","aportePatronal":"0.00","aporteTotal":"500.00"},{"fecha":"17/05/2019","descripcionTransaccion":"Aportes Ordinarios","aportePersonal":"500.00","aportePatronal":"0.00","aporteTotal":"500.00"},{"fecha":"22/05/2019","descripcionTransaccion":"Intereses","aportePersonal":"72.69","aportePatronal":"0.00","aporteTotal":"72.69"},{"fecha":"22/05/2019","descripcionTransaccion":"Comisiones","aportePersonal":"-225.00","aportePatronal":"0.00","aporteTotal":"-225.00"}]}]}]',
                                Fecha_desde__c = date.today().adddays(-10), Fecha_hasta__c = date.today());
        insert casoEDC;
        String fDesde = String.valueOF(casoEDC.Fecha_desde__c);
        String fHasta = String.valueOF(casoEDC.Fecha_hasta__c);
        EstadosDeCuenta.varurl url= new EstadosDeCuenta.varurl();
        url.idcli='0709-1993-00155';
        url.desde=fDesde;
        url.hasta=fHasta;
        string contenido =JSON.serialize(url);
        string hy = EncodingUtil.base64Encode(Blob.valueof(contenido));
        ApexPages.currentPage().getParameters().put('zyx', hy);
        ApexPages.currentPage().getParameters().put('idCaso', casoEDC.id);
        controllerEstadoCuentaTrimestral control3 = new controllerEstadoCuentaTrimestral();
        
        ApexPages.currentPage().getParameters().put('zyx', hy);
        ApexPages.currentPage().getParameters().put('idCaso', casoEDC.id);
        controllerEDChistorico control1 = new controllerEDChistorico();
        
    }

}