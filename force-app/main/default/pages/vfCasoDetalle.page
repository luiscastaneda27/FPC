<apex:page standardController="Case" extensions="extensionCasoDetalle" title="Ficohsa FPC" showheader="false" sidebar="false" cache="false" expires="0"
           standardStylesheets="false" showQuickActionVfHeader="false" docType="html-5.0" id="page" applyHtmlTag="false" applyBodyTag="false" action="{!actualizarSaldoPatronalCons}">
    
    <html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" lang="en">
        <head>
            <meta charset="utf-8" /> 
            <meta http-equiv="x-ua-compatible" content="ie=edge" />
            <title>{!Case.CaseNumber}</title>
            <meta name="viewport" content="width=device-width, initial-scale=1" />
            <apex:stylesheet value="{!URLFOR($Resource.SLDS221, 'assets/styles/salesforce-lightning-design-system-vf.min.css')}" />
            <apex:slds /> 
            
            <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
            <script src="/soap/ajax/28.0/connection.js" type="text/javascript"></script>
            <script>
            sforce.connection.sessionId = '{!$Api.Session_ID}';
            var caseId = '{!Case.Id}';  
             
            $(document).ready( function () { 
            
                updateMontoChequePatrono(); 
                updateTipoPago(); 
                updateSaldo(); 

                var result = sforce.connection.query("Select Sum(Monto_retirar__c) suma from Detalle_caso__c Where Caso__c = '"+caseId+"' and Tipo_retiro__c = ''");
                var records = result.getArray("records"); //alert(records[0].suma);             
                if(records[0].suma != null) {
                    var valRetiro = parseFloat(records[0].suma); //alert(valRetiro.toFixed(2));
                    //var montoaRetirar = $("[id$='montoaRetirar']").val(valRetiro.toFixed(2));
                }               
                
                //Inicio pago a beneficiarios / terceros - Tipo de pago
                //$("[id$='tipoPago']").val("0");
                var e = document.querySelectorAll('[id$="tipoPago"]')[0];
                if (e && !e[0].value) {e.remove(0);} 
                //Fin pago a beneficiarios / terceros - Tipo de pago
                
                var result2 = sforce.connection.query("Select Id from Detalle_caso__c Where Caso__c = '"+caseId+"'");
                var records2 = result2.getArray("records"); //alert('resultado: ' +records2[0].Id);             
                if(records2[0].Id != null) {
                    var x = document.getElementById("pagosBT");
                    if (records2[0].Id == null) {
                        x.style.display = "none";
                    } else {
                        x.style.display = "block";
                    }
                }
                            
                var patronalExtraOrdi = $("[id$='patronalExtraOrdi']").val();
                //$("[id$='montopatExt']").val(patronalExtraOrdi);
                
                var montopatExt = $("[id$='montopatExt']").val();
                var porcenpatExt = $("[id$='porcenpatExt']").val(); 
                var nuevoPorc = (montopatExt/patronalExtraOrdi)*100; 
                if(isNaN(nuevoPorc)) { //var value = 0;
                    $("[id$='porcenpatExt']").val(value.toFixed(2));                 
                } else {
                    $("[id$='porcenpatExt']").val(nuevoPorc.toFixed(2)); 
                }
                var montoRetiro = $("[id$='montoRetiro']").val(); 
                //Actualizar monto bruto a retirar
                var montopatOr = $("[id$='montopatOr']").val(); var montopatOr2 = montopatOr.replace(/,/g, ""); 
                var montoTotalidad =  parseFloat(montopatOr2) + parseFloat(montopatExt);  //alert(montoTotalidad);                                         
                //Fin actualizar monto bruto a retirar            
                             
            });
            $(document).keydown(function(objEvent) {
                if (objEvent.keyCode == 9) {  //tab pressed
                    objEvent.preventDefault(); // stops its action
                }
            })
            function recalculateAmountPO() {
                var patronalOrdi = $("[id$='patronalOrdi']").val();
                var montopatOr = $("[id$='montopatOr']").val(); 
                var porcenpatOr = $("[id$='porcenpatOr']").val();
                var nuevoMonto = (patronalOrdi*(porcenpatOr/100));
                //alert(nuevoMonto.toFixed(2));
                $("[id$='montopatOr']").val(nuevoMonto.toFixed(2)); //alert(nuevoMonto);
            }
            function recalculatePorcentajePO() {
                var patronalOrdi = $("[id$='patronalOrdi']").val();
                var montopatOr = $("[id$='montopatOr']").val();
                var porcenpatOr = $("[id$='porcenpatOr']").val();
                var nuevoPorcentaje = ((montopatOr/patronalOrdi)*100);
                //alert(nuevoPorcentaje.toFixed(2));
                $("[id$='porcenpatOr']").val(nuevoPorcentaje.toFixed(2));
            }
            function recalculateAmountPE() {
                var patronalExtraOrdi = $("[id$='patronalExtraOrdi']").val();
                var montopatExt = $("[id$='montopatExt']").val();
                var porcenpatExt = $("[id$='porcenpatExt']").val();
                var nuevoMonto2 = (patronalExtraOrdi*(porcenpatExt/100));
                $("[id$='montopatExt']").val(nuevoMonto2.toFixed(2));
            }
            function recalculatePorcentajePE() {
                var patronalExtraOrdi = $("[id$='patronalExtraOrdi']").val();
                var montopatExt = $("[id$='montopatExt']").val();
                var porcenpatExt = $("[id$='porcenpatExt']").val();
                var nuevoPorcentaje2 = ((montopatExt/patronalExtraOrdi)*100);
                if(patronalExtraOrdi != 0) {
                    $("[id$='porcenpatExt']").val(nuevoPorcentaje2.toFixed(2));    
                }   
            } 
            function updateSaldo() {
                var result3 = sforce.connection.query("Select Id,Monto_Saldo_Patronal__c,Saldo_Restante_Cuenta_Cliente__c,Tipo_retiro__c,Monto_Bruto_Retirar_Empresa__c,Monto_bruto_retirar__c from Detalle_caso__c Where Caso__c = '"+caseId+"' and Tipo_retiro__c != null and Caso__r.Status != 'Cerrado'");  //alert(result3);
                var records3 = result3.getArray("records");   
                var patronalOrdi = $("[id$='patronalOrdi']").val(); //alert(patronalOrdi);
                var montopatOr = $("[id$='montopatOr']").val(); //alert(montopatOr); 
                var montopatOr2 = montopatOr.split(',').join(''); //alert(montopatOr2); 
                var valorPat = parseFloat(patronalOrdi) - (parseFloat(montopatOr2)).toFixed(2); //alert(valorPat);        
                if(records3[0].Id != null) {
                    var saldoRestante = 0;
                    if(records3[0].Tipo_retiro__c == '51') {
                        var saldoRestante = records3[0].Monto_Saldo_Patronal__c - records3[0].Monto_bruto_retirar__c;
                    } 
                    if(records3[0].Tipo_retiro__c == '51' && records3[0].Monto_Saldo_Patronal__c == 0) {
                        saldoRestante = 0;
                    }
                    try {
                        var updateDetalle = new sforce.SObject("Detalle_caso__c");
                        updateDetalle.Id = records3[0].Id;
                        //updateDetalle.Saldo_Restante_Cuenta_Cliente__c= parseFloat(valorPat.toFixed(2)); 
                        updateDetalle.Saldo_Restante_Cuenta_Cliente__c =  saldoRestante.toFixed(2);   
                        result = sforce.connection.update([updateDetalle]);                        
                        //alert('Datos Actualizados '+result[0].id); 
                        //console.log(result);
                    } catch(err) {
                        alert(err);
                    }
                }
            }
            function updateTipoPago() {
                var tipoPago = $("[id$='tipoPago']").val(); //alert(tipoPago);
                var result4 = sforce.connection.query("Select Id,Tipo_pago__c from Detalle_caso__c Where Caso__c = '"+caseId+"' and Tipo_retiro__c != null and Caso__r.Status != 'Cerrado'");  //alert(result4);
                var records4 = result4.getArray("records");                         
                if(records4[0].Id != null && records4[0].Tipo_pago__c == null) {                    
                    try {
                        var updateDetalle = new sforce.SObject("Detalle_caso__c");
                        updateDetalle.Id = records4[0].Id; 
                        if(tipoPago == 'N') {
                            updateDetalle.Tipo_pago__c = 'N';   
                        }
                        result4 = sforce.connection.update([updateDetalle]);                        
                        //alert('Datos Actualizados '+result4[0].id); 
                        //console.log(result);
                    } catch(err) {
                        alert(err);
                    }
                }
            } 
            function updateMontoChequePatrono() {
                var result5 = sforce.connection.query("Select Id,Monto_cheque__c,Monto_Cheque_Patrono__c,Cargar_cargos_Empleados__c from Detalle_caso__c Where Caso__c = '"+caseId+"' and Tipo_retiro__c != null and Cargar_cargos_Empleados__c = true");  //alert(result4);
                var records5 = result5.getArray("records");                         
                if(records5[0].Id != null) {                    
                    try {
                        var updateDetalle = new sforce.SObject("Detalle_caso__c");
                        updateDetalle.Id = records5[0].Id; 
                        updateDetalle.Monto_Cheque_Patrono__c = records5[0].Monto_cheque__c;
                        result5 = sforce.connection.update([updateDetalle]);                        
                        //alert('Datos Actualizados '+result5[0].id); 
                        //console.log(result);
                    } catch(err) {
                        alert(err);
                    }
                }
            }           
            </script>

            <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"/>
            <link rel="stylesheet" href="/resources/demos/style.css"/>
            <!-- script src="https://code.jquery.com/jquery-1.12.4.js"></script -->
            <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
            <script>
              $.datepicker.regional['es'] = {
              closeText: 'Cerrar',
              prevText: '< Ant',
              nextText: 'Sig >',
              currentText: 'Hoy',
              monthNames: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
              monthNamesShort: ['Ene','Feb','Mar','Abr', 'May','Jun','Jul','Ago','Sep', 'Oct','Nov','Dic'],
              dayNames: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'],
              dayNamesShort: ['Dom','Lun','Mar','Mié','Juv','Vie','Sáb'],
              dayNamesMin: ['Do','Lu','Ma','Mi','Ju','Vi','Sá'],
              weekHeader: 'Sm',
              dateFormat: 'mm/dd/yy',
              firstDay: 1,
              isRTL: false,
              showMonthAfterYear: false,
              yearSuffix: ''
             };
             $.datepicker.setDefaults($.datepicker.regional['es']);
             $(function () {
                 $("[id$='datepicker']").datepicker();
             });
            </script>
            
            <script>
                function myFunction() {
                    var flag = $("[id$='formaRetiro']").val(); alert(flag);
                    if(flag == 'CK') { //alert('Entra');
                        callAction(flag);
                    }
                }
            </script>
                        
            <style>
            .scrolling-wrapper {
              overflow-x: scroll;
              overflow-y: hidden;
              white-space: nowrap;
            }
            </style>
            
        </head>
        <body> 
            <script>
            function enterPress(e){  
                if(e.keyCode==13){
                    if(e.prDefault){ 
                        e.prDefault();
                    }
                    else{
                        e.returnValue=false;
                    }
                    searchFunction();
                }        
            }
            function enterPress2(e){
                if(e.keyCode==13){
                    if(e.preventDefault){ 
                        e.preventDefault();
                    }
                    else{
                        e.returnValue=false;
                    }
                    searchFunction2();
                }        
            }
            </script>
            
            <apex:form id="theForm" >
                <apex:actionFunction name="callAction" reRender="yourText" action="{!changeFlag}">
                    <apex:param value="" name="flagValue"/>
                </apex:actionFunction>
                <apex:actionPoller rendered="{!detalleCasoActualizado}" reRender="theForm"  action="{!actualizardetalleCaso}" interval="5" />
                <apex:actionFunction action="{!buscarSubPro}" name="searchFunction" />
                <apex:actionFunction action="{!buscarCuentaC}" name="searchFunction2" />
                 <apex:actionStatus id="status">
                <apex:facet name="start">
                    <div style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; opacity: 0.25; z-index: 1000; background-color: black;">
                         
                    </div>
                    
                    <div role="status" class="slds-spinner slds-spinner_large">
                        <span class="slds-assistive-text">Por Favor Espere...</span>
                        <div class="slds-spinner__dot-a"></div>
                        <div class="slds-spinner__dot-b"></div>
                    </div>
                </apex:facet>
            </apex:actionStatus>
                <div class="slds-scope"> 
                    <apex:Messages styleClass="slds-notify slds-notify--alert slds-theme--alert-texture"/>
                    
                    <fieldset class="slds-box slds-align--absolute-center slds-container--medium">
                       
                        <apex:outputPanel rendered="{!!cTipoCaso.retiros}">
                            <fieldset class="slds-form--compound ">
                                <div class="slds-form-element__group">
                                    <div class="slds-form-element__row">
                                        
                                        <div class="slds-form-element slds-size--1-of-2">
                                            
                                            <label class="slds-form-element__label" >Cuenta</label>
                                            <apex:selectList rendered="{!!cTipoCaso.reversiones}" value="{!idCuenta}" id="idCuenta2" styleclass="slds-select" size="1">
                                                <apex:selectOptions value="{!listCuentas}" />
                                                <apex:actionSupport event="onchange" action="{!selecCuenta}" rendered="{!cTipoCaso.subProducto}"/>
                                                <apex:actionSupport event="onchange" action="{!selecCuentaRetiros}" reRender="theForm" status="status"  rendered="{!cTipoCaso.retiros}"/>
                                                <!--apex:actionSupport immediate="true" event="onchange" action="{!MonedaCuenta}" rendered="{!cTipoCaso.reversiones}"/-->
                                            </apex:selectList>
                                            <apex:selectList rendered="{!cTipoCaso.reversiones}" value="{!idCuenta}" id="idCuenta" styleclass="slds-select" size="1">
                                                <apex:selectOptions value="{!listCuentas}" />
                                                <apex:actionSupport immediate="true" event="onchange" action="{!MonedaCuenta}" rendered="{!cTipoCaso.reversiones}"/>
                                            </apex:selectList>
                                        </div>
                                        
                                        <div class="slds-form-element slds-size--2-of-2">
                                            <br/>
                                            <label class="slds-form-element__label" >
                                                <apex:outputLabel rendered="{!cTipoCaso.reversiones}">Moneda: {!monedaCuenta} </apex:outputLabel>
                                            </label>
                                            
                                            
                                            <apex:commandButton value="Agregar" action="{!agregarCuenta}" styleClass="slds-button slds-button--neutral" 
                                                                rendered="{!cTipoCaso.constancias}" />  
                                            <apex:commandButton value="Ver Beneficiarios" action="{!verBeneficiarios}" styleClass="slds-button slds-button--neutral" 
                                                                rendered="{!cTipoCaso.actInformacion}" />  
                                            <apex:commandButton value="Nuevo Beneficiario" action="{!agregarCuenta}" styleClass="slds-button slds-button--neutral" 
                                                                rendered="{!cTipoCaso.actInformacion}" />
                                            
                                        </div>
                                    </div>
                                    <apex:outputpanel rendered="{!AND(cTipoCaso.constancias, Caso.Constancia__c == 'A4', Caso.SuppliedEmail != Null)}">
                                        <div class="slds-form-element__group">
                                            <div class="slds-form-element__row">
                                                <div class="slds-form-element slds-size--1-of-2">
                                                    <label class="slds-form-element__label" >
                                                        <abbr class="slds-required" title="required">*</abbr>Agencia donde quiere ir a recoger la Constancia</label><br/>
                                                    <apex:inputField styleclass="slds-input" value="{!Caso.Agencia__r.Name}" html-disabled="true"/> 
                                                </div>
                                            </div>
                                        </div>
                                    </apex:outputpanel>
                                    
                                    <apex:outputpanel rendered="{!AND(cTipoCaso.constancias, Caso.Constancia__c != 'A4', 
                                                                Caso.Constancia__c != 'Saldo', Caso.Constancia__c != 'A5',
                                                                Caso.Constancia__c != 'P1')}">
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-2">
                                                <label class="slds-form-element__label" >Fecha desde</label>
                                                <apex:inputField type="date" styleclass="slds-input"  value="{!Caso.Fecha_desde__c}" showDatePicker="true" />
                                            </div>
                                            <div class="slds-form-element slds-size--2-of-2">
                                                <label class="slds-form-element__label" >Fecha hasta</label>
                                                <apex:inputField type="date" styleclass="slds-input"  value="{!Caso.Fecha_hasta__c}" showDatePicker="true" />
                                            </div>
                                        </div>
                                    </apex:outputpanel>
                                    
                                    <apex:outputpanel rendered="{!AND(cTipoCaso.constancias, Caso.Constancia__c = 'P1')}">
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-3">
                                                <label class="slds-form-element__label" >Total Saldo Personal</label><br/>
                                                <apex:outputField styleclass="slds-input"   value="{!detalleCaso.Total_Saldo_Personal__c}"  />
                                            </div>
                                            <div class="slds-form-element slds-size--2-of-3">
                                                <label class="slds-form-element__label" >Total Saldo Patronal</label><br/>
                                                <apex:outputField styleclass="slds-input"  value="{!detalleCaso.Total_Saldo_Patronal__c}"  />
                                            </div>
                                            <div class="slds-form-element slds-size--3-of-3">
                                                <label class="slds-form-element__label" >Fondo de Inversión</label><br/>
                                                <apex:outputField styleclass="slds-input"  value="{!cuentaCliente.FondoInversionCP__c}"  />
                                            </div>
                                        </div>
                                        
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-3">
                                                <label class="slds-form-element__label" >Es Primer prestamo</label><br/>
                                                <apex:inputField styleclass="slds-input" rendered="{!AND(caso.status='Nuevo', !case.Aprobado__c)}"   value="{!detalleCaso.Es_Primer_Prestamo__c }"  >
                                                    <apex:actionSupport event="onchange" action="{!VerificacionCheckPrestamos}" reRender="theForm" status="status" />
                                                </apex:inputField>
                                                <apex:outputField rendered="{!OR(caso.status !='Nuevo', case.Aprobado__c)}" value="{!detalleCaso.Es_Primer_Prestamo__c }" />
                                            </div>
                                            <div class="slds-form-element slds-size--2-of-3">
                                                <label class="slds-form-element__label" >No es Primer prestamo</label><br/>
                                                <apex:inputField styleclass="slds-input" rendered="{!AND(caso.status='Nuevo', !case.Aprobado__c)}"  value="{!detalleCaso.No_es_primer_prestamo__c}"  >
                                                    <apex:actionSupport event="onchange" action="{!VerificacionCheckPrestamos}" reRender="theForm" status="status" />
                                                </apex:inputField>
                                                <apex:outputField rendered="{!OR(caso.status !='Nuevo', case.Aprobado__c)}" value="{!detalleCaso.No_es_primer_prestamo__c }" />
                                            </div>
                                            <div class="slds-form-element slds-size--3-of-3">
                                                <label class="slds-form-element__label" >Es Refinanciamiento</label><br/>
                                                <apex:inputField styleclass="slds-input" rendered="{!AND(caso.status='Nuevo', !case.Aprobado__c)}"   value="{!detalleCaso.Es_Refinanciamiento__c}"  >
                                                    <apex:actionSupport event="onchange" action="{!VerificacionCheckPrestamos}" reRender="theForm" status="status" />
                                                </apex:inputField>
                                                <apex:outputField rendered="{!OR(caso.status !='Nuevo', case.Aprobado__c)}" value="{!detalleCaso.Es_Refinanciamiento__c }" />
                                            </div>
                                        </div>
                                        <apex:outputPanel rendered="{!!detalleCaso.Es_Refinanciamiento__c}">
                                            <div class="slds-form-element__row">
                                                <div class="slds-form-element slds-size--1-of-2">
                                                    <label class="slds-form-element__label" >Monto del Prestamo</label><br/>
                                                    <apex:inputField styleclass="slds-input" rendered="{!AND(caso.status='Nuevo', !case.Aprobado__c)}"  value="{!detalleCaso.Monto_Prestamo__c}"  >
                                                        <apex:actionSupport event="onchange" action="{!VerificacionMontoPrestamo}" reRender="theForm" status="status" />
                                                    </apex:inputField>
                                                    <apex:outputField styleclass="slds-input" rendered="{!OR(caso.status!='Nuevo',case.Aprobado__c)}"   value="{!detalleCaso.Monto_Prestamo__c}"  />
                                                </div>
                                                <div class="slds-form-element slds-size--2-of-2">
                                                    <label class="slds-form-element__label" >Número de Préstamo</label>
                                                    <apex:inputField styleclass="slds-input"  value="{!detalleCaso.Numero_Prestamo__c}"  />
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                        <apex:outputPanel rendered="{!detalleCaso.Es_Refinanciamiento__c}">
                                            <div class="slds-form-element__row">
                                                <div class="slds-form-element slds-size--1-of-3">
                                                    <label class="slds-form-element__label" >Prestamo a Refinanciar</label>
                                                    <apex:inputField styleclass="slds-input"  value="{!detalleCaso.Prestamo_anterior__c}"  >
                                                        <apex:actionSupport event="onchange" action="{!VerificacionPreatamoRefinanciar}" reRender="theForm" status="status" />
                                                    </apex:inputField>
                                                </div>
                                                <div class="slds-form-element slds-size--2-of-3">
                                                    <label class="slds-form-element__label" >Monto del Prestamo</label><br/>
                                                    <apex:inputField styleclass="slds-input" rendered="{!AND(caso.status='Nuevo', !case.Aprobado__c, detalleCaso.Prestamo_anterior__c!=null)}"  value="{!detalleCaso.Monto_Prestamo__c}"  >
                                                        <apex:actionSupport event="onchange" action="{!VerificacionMontoPrestamo}" reRender="theForm" status="status" />
                                                    </apex:inputField>
                                                    <apex:outputField styleclass="slds-input" rendered="{!OR(caso.status!='Nuevo',case.Aprobado__c, detalleCaso.Prestamo_anterior__c=null)}"   value="{!detalleCaso.Monto_Prestamo__c}"  />
                                                </div>
                                                <div class="slds-form-element slds-size--3-of-3">
                                                    <label class="slds-form-element__label" >Numero de Prestamo</label>
                                                    <apex:inputField styleclass="slds-input"   value="{!detalleCaso.Numero_Prestamo__c}"  />
                                                    
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                        <!--div class="slds-form-element__row">
<div class="slds-form-element slds-size--1-of-3">
<label class="slds-form-element__label" >Es Primer prestamo</label><br/>
<apex:inputField styleclass="slds-input" rendered="{!AND(caso.status='Nuevo', !case.Aprobado__c)}"   value="{!detalleCaso.Es_Primer_Prestamo__c }"  >
<apex:actionSupport event="onchange" action="{!VerificacionCheckPrestamos}" reRender="theForm" status="status" />
</apex:inputField>
<apex:outputField rendered="{!OR(caso.status !='Nuevo', case.Aprobado__c)}" value="{!detalleCaso.Es_Primer_Prestamo__c }" />
</div>
<div class="slds-form-element slds-size--2-of-3">
<label class="slds-form-element__label" >No es Primer prestamo</label><br/>
<apex:inputField styleclass="slds-input" rendered="{!AND(caso.status='Nuevo', !case.Aprobado__c)}"  value="{!detalleCaso.No_es_primer_prestamo__c}"  >
<apex:actionSupport event="onchange" action="{!VerificacionCheckPrestamos}" reRender="theForm" status="status" />
</apex:inputField>
<apex:outputField rendered="{!OR(caso.status !='Nuevo', case.Aprobado__c)}" value="{!detalleCaso.No_es_primer_prestamo__c }" />
</div>
<div class="slds-form-element slds-size--3-of-3">
<label class="slds-form-element__label" >Es Refinanciamiento</label><br/>
<apex:inputField styleclass="slds-input" rendered="{!AND(caso.status='Nuevo', !case.Aprobado__c)}"   value="{!detalleCaso.Es_Refinanciamiento__c}"  >
<apex:actionSupport event="onchange" action="{!VerificacionCheckPrestamos}" reRender="theForm" status="status" />
</apex:inputField>
<apex:outputField rendered="{!OR(caso.status !='Nuevo', case.Aprobado__c)}" value="{!detalleCaso.Es_Refinanciamiento__c }" />
</div>
</div-->
                                        
                                        
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-2">
                                                <label class="slds-form-element__label" >Total Pignorado</label><br/>
                                                <apex:outputField value="{!detalleCaso.Monto_Pignorado__c}"  />
                                                
                                            </div>
                                            <div class="slds-form-element slds-size--2-of-2">
                                                <label class="slds-form-element__label" >Monto a Pignorar</label><br/>
                                                <apex:outputField styleclass="slds-input" rendered="{!OR(detalleCaso.Monto_Pignorar_Refinanciamiento__c = null, detalleCaso.Monto_Pignorar_Refinanciamiento__c = 0)}"   value="{!detalleCaso.Monto_a_Pignorar__c}"  />
                                                <apex:outputField styleclass="slds-input" rendered="{!AND(detalleCaso.Monto_Pignorar_Refinanciamiento__c != null, detalleCaso.Monto_Pignorar_Refinanciamiento__c != 0)}"    value="{!detalleCaso.Monto_Pignorar_Refinanciamiento__c}"  />
                                            </div>
                                        </div>
                                    </apex:outputpanel>
                                    
                                    <apex:outputpanel rendered="{!AND(cTipoCaso.constancias, Caso.Constancia__c = 'A6')}">
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-2">
                                                <label class="slds-form-element__label" >Monto de compromiso</label>
                                                <apex:inputField styleclass="slds-input" value="{!Caso.Monto_compromiso_aporte__c}"/>
                                            </div>
                                            <div class="slds-form-element slds-size--2-of-2" >
                                                <label class="slds-form-element__label" >Frecuencia</label>
                                                <apex:inputField styleclass="slds-input" value="{!Caso.Frecuencia__c}"/>
                                            </div>
                                        </div>
                                    </apex:outputpanel>
                                    
                                </div>
                            </fieldset>
                        </apex:outputPanel>
                        <!----  REPOSICION DE CARNET----->
                        <apex:outputPanel rendered="{!cTipoCaso.reposicionCarnet}">
                        <fieldset class="slds-form--compound ">
                                <div class="slds-form-element__group">
                                    <div class="slds-form-element__row">
                                        <div class="slds-form-element slds-size--1-of-2">
                                            <label class="slds-form-element__label" >
                                                <abbr class="slds-required" title="required">*</abbr>Código de barrra</label><br/>
                                            <apex:inputField styleclass="slds-input" value="{!Caso.Codigo_barra__c}" required="true"/>
                                             
                                        </div>
                                        <div class="slds-form-element slds-size--2-of-2">
                                           <label class="slds-form-element__label" >
                                                <abbr class="slds-required" title="required">*</abbr>Agencia donde quiere ir a recoger el carnet</label><br/>
                                            <apex:inputField styleclass="slds-input" value="{!Caso.Agencia__r.Name}" rendered="{!caso.SuppliedEmail != Null}" html-disabled="true"/> 
                                            <apex:selectList required="true" styleclass="slds-select"  value="{!caso.Agencia__c}" rendered="{!caso.SuppliedEmail == Null}" size="1">
                                                <apex:selectOptions value="{!listAgencias}" />
                                            </apex:selectList>
                                        </div>
                                    </div>
                            </div>
                            </fieldset>
                        
                        </apex:outputPanel>
                        
                        
                        <!-- AUMENTO O DISMINUCION DE APORTE -->
                        <apex:outputpanel rendered="{!cTipoCaso.aumDisAporte}">             
                            <fieldset class="slds-form--compound ">
                                <div class="slds-form-element__group">
                                    <div class="slds-form-element__row">
                                        <div class="slds-form-element slds-size--1-of-2">
                                            <label class="slds-form-element__label" >
                                                <abbr class="slds-required" title="required">*</abbr>Tipo operación</label>
                                            <apex:inputField styleclass="slds-input" value="{!detalleCaso.Tipo_Operacion__c}" required="true"> 
                                                <apex:actionSupport event="onchange" action="{!accionVacia}"/>
                                            </apex:inputField> 
                                            
                                            <apex:outputpanel rendered="{!OR(detalleCaso.Tipo_Operacion__c = 'A5',detalleCaso.Tipo_Operacion__c = 'A6',
                                                                        detalleCaso.Tipo_Operacion__c = 'A3')}">
                                                <label class="slds-form-element__label" >
                                                    <abbr class="slds-required" title="required">*</abbr>Frecuencia</label>
                                                <apex:inputField styleclass="slds-input" value="{!detalleCaso.Frecuencia__c}" />
                                            </apex:outputpanel> 
                                            
                                            <apex:outputPanel rendered="{!OR(detalleCaso.Tipo_Operacion__c = 'A6',
                                                                        AND(detalleCaso.Tipo_Operacion__c = 'A3', detalleCaso.Nuevo_canal_aporte__c = 'TA'))}">
                                                <label class="slds-form-element__label" >
                                                    <abbr class="slds-required" title="required">*</abbr>POS</label>
                                                <apex:inputField styleclass="slds-input" value="{!detalleCaso.POS__c}" /> 
                                            </apex:outputPanel>
                                        </div>
                                        <div class="slds-form-element slds-size--2-of-2">
                                            <apex:outputPanel rendered="{!OR(detalleCaso.Tipo_Operacion__c = 'A1',detalleCaso.Tipo_Operacion__c = 'A2')}">
                                                <label class="slds-form-element__label">
                                                    <abbr class="slds-required" title="required">*</abbr>Nuevo monto de operación</label><br/>
                                                <apex:inputField styleclass="slds-input" value="{!detalleCaso.Nuevo_monto_aporte__c}" />
                                            </apex:outputPanel>
                                            
                                            <apex:outputPanel rendered="{!If(detalleCaso.Tipo_Operacion__c = 'A3',true,false)}">
                                                <label class="slds-form-element__label">
                                                    <abbr class="slds-required" title="required">*</abbr>Nuevo canal de aporte</label><br/>
                                                <apex:inputField styleclass="slds-input" value="{!detalleCaso.Nuevo_canal_aporte__c}" >
                                                    <apex:actionSupport event="onchange" action="{!accionVacia2}"/>
                                                </apex:inputField>  
                                            </apex:outputPanel> 
                                            
                                            <apex:outputPanel rendered="{!OR(detalleCaso.Tipo_Operacion__c = 'A5',detalleCaso.Tipo_Operacion__c = 'A6',
                                                                        AND(detalleCaso.Tipo_Operacion__c = 'A3', 
                                                                        OR(detalleCaso.Nuevo_canal_aporte__c = 'AH', detalleCaso.Nuevo_canal_aporte__c = 'TA')))}">
                                                <label class="slds-form-element__label" >
                                                    <abbr class="slds-required" title="required">*</abbr># Cuenta / Tarjeta</label>
                                                <apex:inputText styleclass="slds-input" value="{!detalleCaso.N_Cuenta_Bancaria__c}" /> 
                                            </apex:outputPanel>                                   
                                            
                                            <apex:outputPanel rendered="{!If(detalleCaso.Tipo_Operacion__c = 'A4',true,false)}">
                                                <label class="slds-form-element__label" >
                                                    <abbr class="slds-required" title="required">*</abbr>Nueva fecha de aporte</label>
                                                <!-- apex:input type="date" value="{!FechaAporte}" styleclass="slds-input" -->
                                                <apex:inputField type="date" styleclass="slds-input" value="{!detalleCaso.Nueva_fecha_aporte__c}" showDatePicker="true" />
                                            </apex:outputPanel>
                                            
                                            
                                            <apex:outputpanel rendered="{!OR(detalleCaso.Tipo_Operacion__c = 'A6',
                                                                        AND(detalleCaso.Tipo_Operacion__c = 'A3', detalleCaso.Nuevo_canal_aporte__c = 'TA'))}">                                     
                                                <label class="slds-form-element__label" >
                                                    <abbr class="slds-required" title="required">*</abbr>Fecha de vencimiento</label>
                                                <div>
                                                    <apex:inputField value="{!detalleCaso.Mes__c}" />
                                                    <apex:inputField value="{!detalleCaso.Ano_tarjeta__c}" />
                                                </div>  
                                            </apex:outputpanel>                                                                         
                                            
                                        </div>
                                    </div>
                                    
                                    <apex:outputPanel rendered="{!detalleCaso.Inicio_Fecha_Aporte__c != null}" >
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-2">
                                                <label class="slds-form-element__label" >
                                                    <abbr class="slds-required" title="required">*</abbr>Fecha de Inicio de Aporte</label>
                                                <apex:inputField styleclass="slds-input" value="{!detalleCaso.Inicio_Fecha_Aporte__c}"  /> 
                                            </div>
                                            <div class="slds-form-element slds-size--2-of-2" />
                                        </div>
                                    </apex:outputPanel>
                                    
                                    
                                    
                                </div>
                            </fieldset>                 
                        </apex:outputpanel>
                        
                        <!-- SUBPRODUCTO -->
                        <apex:outputpanel rendered="{!cTipoCaso.subProducto}"> 
                            <fieldset class="slds-form--compound ">
                                <div class="slds-form-element__group">
                                    <div class="slds-form-element__row">
                                        <div class="slds-form-element slds-size--1-of-2">
                                            <label class="slds-form-element__label" >
                                                <abbr class="slds-required" title="required">*</abbr>Acción</label><br/>
                                            <apex:inputField styleclass="slds-input" value="{!detalleCaso.Accion__c}" required="true">
                                                <apex:actionSupport event="onchange" action="{!accionSubproducto}"/>
                                            </apex:inputField> 
                                        </div>
                                        <div class="slds-form-element slds-size--2-of-2">
                                            <label class="slds-form-element__label">Producto</label><br/ >
                                            <apex:outputField rendered="{!case.status !='Cerrado'}" value="{!cuentaCliente.Producto__r.Name}" styleclass="slds-input" /> 
                                            <apex:outputField rendered="{!case.status ='Cerrado'}" value="{!detalleCaso.Producto_Anterior__c}" /> 
                                        </div>
                                    </div>
                                    
                                    <div class="slds-form-element__row">
                                        <div class="slds-form-element slds-size--1-of-2">
                                            <label class="slds-form-element__label" >Cuenta Colectiva</label><br/>
                                            <apex:outputField rendered="{!case.status !='Cerrado'}" styleclass="slds-input" value="{!cuentaCliente.Detalle_Cuenta_colectiva__c}" /> 
                                            <apex:outputField rendered="{!case.status ='Cerrado'}" value="{!detalleCaso.Detalle_Cuenta_colectiva__c}" /> 
                                            
                                        </div>
                                        <div class="slds-form-element slds-size--2-of-2">
                                            <apex:outputPanel rendered="{!if(detalleCaso.Accion__c = 'A1',true,false)}">
                                                <label class="slds-form-element__label">Nueva Cuenta colectiva</label><br/>
                                                <div class="slds-input-has-icon slds-input-has-icon--right">                                   
                                                    <apex:commandLink action="{!buscarCuentaC}">
                                                        <svg class="slds-input__icon" aria-hidden="true">                                            
                                                            <use xlink:href="{!URLFOR($Resource.SLDS221, '/assets/icons/utility-sprite/svg/symbols.svg#search')}"></use>                                           
                                                        </svg>
                                                    </apex:commandLink>
                                                    <apex:outputField styleclass="slds-input" value="{!detalleCaso.Detalle_Cuenta_colectiva__c}" />
                                                </div>  
                                            </apex:outputPanel>
                                        </div>
                                    </div>
                                    
                                    <div class="slds-form-element__row">
                                        <div class="slds-form-element slds-size--1-of-2">
                                            <label class="slds-form-element__label" >Subproducto</label><br/>
                                            <apex:outputField rendered="{!OR(Caso.status !='Cerrado', detalleCaso.Detalle_subproducto2__c =null)}" styleclass="slds-input" value="{!cuentaCliente.Detalle_Subproducto__c}" /> 
                                            <apex:outputField rendered="{!AND(Caso.status ='Cerrado', detalleCaso.Detalle_subproducto2__c !=null)}" styleclass="slds-input" value="{!detalleCaso.Detalle_subproducto2__c}" /> 
                                        </div>
                                        <div class="slds-form-element slds-size--2-of-2">
                                            <label class="slds-form-element__label">Nuevo Subproducto</label><br/>
                                            <div class="slds-input-has-icon slds-input-has-icon--right">                                   
                                                <apex:commandLink action="{!buscarSubPro}" rendered="{!if(detalleCaso.Accion__c != 'A1',true,false)}" >
                                                    <svg class="slds-input__icon" aria-hidden="true">                                            
                                                        <use xlink:href="{!URLFOR($Resource.SLDS221, '/assets/icons/utility-sprite/svg/symbols.svg#search')}"></use>                                           
                                                    </svg>
                                                </apex:commandLink>
                                                <apex:outputField styleclass="slds-input" value="{!detalleCaso.Detalle_subproducto__c}" />
                                            </div>  
                                        </div>
                                    </div>
                                    
                                </div>
                            </fieldset>                                                       
                        </apex:outputpanel>
                        
                        
                        <!-- RETIROS -->
                        <apex:outputpanel rendered="{!cTipoCaso.retiros}"> 
                            <!--apex:commandButton value="Prueba" action="{!prueba1}" /-->
                            <fieldset class="slds-form--compound ">
                                <div class="slds-form-element__group">
                                    <div class="slds-form-element__row">
                                        <div class="slds-form-element slds-size--1-of-2">
                                            <label class="slds-form-element__label" >Cuenta</label>
                                            <apex:selectList value="{!idCuenta}" id="idCuentaRetiros" styleclass="slds-select" size="1">
                                                <apex:selectOptions value="{!listCuentas}" />
                                                <apex:actionSupport event="onchange" action="{!selecCuentaRetiros}" reRender="theForm" status="status"  rendered="{!cTipoCaso.retiros}"/>
                                            </apex:selectList>                                       
                                        </div>
                                        <div class="slds-form-element slds-size--2-of-2"> 
                                            <label class="slds-form-element__label" >
                                                <abbr class="slds-required" title="required">*</abbr>Tipo de retiro</label>
                                            <apex:inputField styleclass="slds-input" value="{!detalleCaso.Tipo_retiro__c}">
                                                <apex:actionSupport event="onchange" action="{!selecTipoRetiro}"/>
                                            </apex:inputField>
                                        </div>
                                    </div>
                                    
                                    <div class="slds-form-element__row">
                                        <div class="slds-form-element slds-size--1-of-2">
                                            <label class="slds-form-element__label" >
                                                Comisión por retiro anticipado</label>
                                            <apex:inputField styleclass="slds-input" value="{!detalleCaso.Comision_Retiro_Anticipado__c}"/> 
                                            <apex:outputField styleclass="slds-input" value="{!detalleCaso.Monto_comision_retiro__c}" />
                                        </div>
                                        <div class="slds-form-element slds-size--2-of-2">
                                            <label class="slds-form-element__label" > Cliente quiere capital semilla</label>
                                            <apex:inputField styleclass="slds-input" value="{!detalleCaso.Cliente_quiere_capital_semilla__c}" >
                                                <apex:actionSupport event="onchange" action="{!selecTipoRetiro}"/>
                                            </apex:inputField> 
                                        </div>
                                    </div>
                                    
                                    <!--apex:outputPanel rendered="{!detallecaso.Cobrar_empleado_sigue_laborando__c}"--> 
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-2">
                                                <label class="slds-form-element__label" > Cliente sigue laborando</label>
                                                <apex:inputField styleclass="slds-input" value="{!detalleCaso.Cliente_sigue_Laborando__c}" /> 
                                            </div>
                                            
                                            <div class="slds-form-element slds-size--2-of-2">                                                                                                                     
                                            </div>
                                        </div>
                                    <!--/apex:outputPanel-->
                                    <div class="slds-form-element__row">
                                        <div class="slds-form-element slds-size--1-of-1">
                                            <h3 class="slds-section-title--divider">POLITICAS</h3>  
                                        </div>
                                    </div>  
                                    <apex:outputPanel rendered="{!AND(!detalleCaso.Cobro_Individual_CRA__c,!detalleCaso.Cobro_Saldo_Minimo_CRA__c)}">
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-2">                                       
                                                <label class="slds-form-element__label" >Comisión por retiro anticipado</label><br/>
                                                <apex:outputField styleclass="slds-input" value="{!detalleCaso.Comision_retiro_anticipado_empresa__c}" />                     
                                            </div>
                                            <div class="slds-form-element slds-size--2-of-2">
                                                <label class="slds-form-element__label" >% de Comisión por retiro anticipado</label><br/>
                                                <apex:outputField styleclass="slds-input" value="{!detalleCaso.Porcentaje_comision__c}"/>                                                                                                    
                                            </div>
                                        </div> 
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!OR(detalleCaso.Cobro_Individual_CRA__c, true)}">
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-2">                                       
                                                <label class="slds-form-element__label" >Cobro Individual CRA</label><br/>
                                                <apex:inputField styleclass="slds-input" value="{!detalleCaso.Cobro_Individual_CRA__c}" />                     
                                            </div>
                                            <div class="slds-form-element slds-size--1-of-2">
                                                <label class="slds-form-element__label" >% CRA individual</label><br/>
                                                <apex:inputField styleclass="slds-input" value="{!detalleCaso.Porcentaje_CRA_Individual__c}"/>                                                                                                    
                                            </div>
                                        </div> 
                                    </apex:outputPanel>
                                   
                                    <apex:outputPanel rendered="{!detalleCaso.Monto_Saldo_Minimo_CRA__c !=null}">
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-2">                                       
                                                <label class="slds-form-element__label" >Cobro Saldo Minimo CRA</label><br/>
                                                <apex:outputField styleclass="slds-input" value="{!detalleCaso.Cobro_Saldo_Minimo_CRA__c }" />                     
                                            </div>
                                            <div class="slds-form-element slds-size--2-of-2">
                                                <label class="slds-form-element__label" >Monto Saldo minimo CRA</label><br/>
                                                <apex:outputField styleclass="slds-input" value="{!detalleCaso.Monto_Saldo_Minimo_CRA__c}"/>                                                                                                    
                                            </div>
                                        </div> 
                                    </apex:outputPanel>
                                    
                                    <!--apex:outputPanel rendered="{!If(cuentaCliente.Cuenta_colectiva2__c != null,true,false)}"-->
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-2">   
                                                <label class="slds-form-element__label" >Cobro si empleado sigue laborando</label><br/>
                                                <apex:outputField styleclass="slds-input" value="{!detalleCaso.Cobrar_empleado_sigue_laborando__c}"/>
                                            </div>
                                            <div class="slds-form-element slds-size--2-of-2">
                                                <apex:outputPanel rendered="{!If(cuentaCliente.Cuenta_colectiva2__c != null,true,false)}">
                                                    <label class="slds-form-element__label">
                                                        Permitir Retiro de Saldos Patronales</label><br/>
                                                    <apex:outputField styleclass="slds-input" value="{!detalleCaso.Permitir_Retiro_Saldos_Patronales__c}" /> 
                                                </apex:outputPanel> 
                                            </div>
                                        </div>     
                                    <!--/apex:outputPanel-->  
                                    
                                    <div class="slds-form-element__row">
                                        <div class="slds-form-element slds-size--1-of-2">
                                            <label class="slds-form-element__label" >Exoneracion 3ra Edad</label>
                                            <apex:outputField styleclass="slds-input" value="{!detalleCaso.Exoneracion_3ra_Edad__c}" /> 
                                            <!--:outputText  value="{!anosCliente} Años" /--> 
                                        </div>
                                        
                                        <div class="slds-form-element slds-size--1-of-2">
                                            <label class="slds-form-element__label" >Edad</label><br/>
                                            <apex:outputText value="{!anosCliente} Años" /> 
                                        </div>
                                    </div>
                                    
                                    <div class="slds-form-element__row">
                                        <div class="slds-form-element slds-size--1-of-1">
                                            <h3 class="slds-section-title--divider">FORMA DE RETIRO</h3>    
                                        </div>
                                    </div>  
                                    <div class="slds-form-element__row">
                                        <div class="slds-form-element slds-size--1-of-2">
                                            <label class="slds-form-element__label" >
                                                <abbr class="slds-required" title="required">*</abbr>Forma de retiro</label>
                                            <apex:inputField styleclass="slds-input" value="{!detalleCaso.Forma_Retiro__c}">
                                                <apex:actionSupport event="onchange" action="{!accionVacia2}"/>
                                            </apex:inputField>   
                                        </div>
                                        <div class="slds-form-element slds-size--2-of-2">
                                            <div>
                                                <label class="slds-form-element__label">
                                                    <abbr class="slds-required" title="required">*</abbr>Cobro de TSP</label><br/>
                                                <div>
                                                    <apex:inputField styleclass="slds-input" value="{!detalleCaso.Cobro_TSP__c}" />
                                                    <apex:outputField styleclass="slds-input" value="{!detalleCaso.Monto_TSP__c}" />    
                                                </div>
                                            </div>
                                            <apex:outputPanel rendered="{!If(detalleCaso.Forma_Retiro__c = 'CK',true,false)}">
                                                <label class="slds-form-element__label">
                                                    <abbr class="slds-required" title="required">*</abbr>Cobro de Cheque</label><br/>
                                                <div>
                                                    <apex:inputField styleclass="slds-input" value="{!detalleCaso.Cobro_Cheque__c}" />
                                                    <apex:outputField styleclass="slds-input" value="{!detalleCaso.Monto_cheque__c}" /> 
                                                </div>                                              
                                            </apex:outputPanel>                                       
                                        </div>
                                    </div>
                                    
                                    <apex:outputPanel rendered="{!OR(detalleCaso.Forma_Retiro__c = 'AH',detalleCaso.Forma_Retiro__c = 'ACH')}">
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-2">
                                                <label class="slds-form-element__label" >
                                                    <abbr class="slds-required" title="required">*</abbr>Cuenta Origen</label>
                                                <apex:inputField styleclass="slds-input" value="{!detalleCaso.Cuenta_destino__c}" />
                                            </div> 
                                            <div class="slds-form-element slds-size--2-of-2">
                                                
                                            </div>                                  
                                        </div>
                                        
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--2-of-2">
                                                <label class="slds-form-element__label">
                                                    <abbr class="slds-required" title="required">*</abbr>Tipo de cuenta</label><br/>
                                                <apex:inputField styleclass="slds-input" value="{!detalleCaso.Tipo_Cuenta__c}"/> 
                                            </div>
                                            <div class="slds-form-element slds-size--2-of-2">
                                                <label class="slds-form-element__label" >
                                                    <abbr class="slds-required" title="required">*</abbr>Moneda de la cuenta</label>
                                                <apex:inputText styleclass="slds-input" value="{!detalleCaso.currencyIsoCode}" /> 
                                            </div>
                                            <div class="slds-form-element slds-size--1-of-2">
                                                <label class="slds-form-element__label" >
                                                    <abbr class="slds-required" title="required">*</abbr># Cuenta Destino</label>
                                                <apex:inputText styleclass="slds-input" value="{!detalleCaso.N_Cuenta_Bancaria__c}" />
                                            </div>
                                            <div class="slds-form-element slds-size--2-of-2" >
                                                <label class="slds-form-element__label" />
                                                <div>
                                                    <apex:commandButton rendered="{!detalleCaso.Forma_Retiro__c == 'AH'}" value="Verificar" action="{!verPropietarioCuenta}" 
                                                                        styleClass="slds-button slds-button--success"/>  
                                                </div> 
                                            </div>
                                        </div>
                                        
                                        <apex:outputPanel rendered="{!detalleCaso.Forma_Retiro__c == 'AH'}">
                                            <div class="slds-form-element__row">
                                                <div class="slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_info" role="alert">
                                                    <span class="slds-assistive-text">info</span>
                                                    <span class="slds-icon_container slds-icon-utility-user slds-m-right_x-small" title="Description of icon when needed">
                                                        <svg class="slds-icon slds-icon_x-small" aria-hidden="true">
                                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#user"></use>
                                                        </svg>
                                                    </span>
                                                    <apex:outputField styleclass="slds-input" value="{!detalleCaso.Propietario_cuenta__c}" />
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                    
                                    <apex:outputPanel rendered="{!detalleCaso.Forma_Retiro__c = 'ACH'}">    
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-2">
                                                <label class="slds-form-element__label" >
                                                    <abbr class="slds-required" title="required">*</abbr>Banco</label>
                                                <apex:inputField styleclass="slds-input" value="{!detalleCaso.Banco__c}"/> 
                                            </div>
                                            <div class="slds-form-element slds-size--2-of-2">                                       
                                                <label class="slds-form-element__label">
                                                    <abbr class="slds-required" title="required">*</abbr>Cobro de ACH</label><br/>
                                                <div>
                                                    <apex:inputField styleclass="slds-input" value="{!detalleCaso.Cobro_ACH__c}" /> 
                                                    <apex:outputField styleclass="slds-input" value="{!detalleCaso.Monto_ACH__c}" />    
                                                </div>                                                               
                                            </div>
                                        </div>                              
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!detalleCaso.Permitir_Retiro_Saldos_Patronales__c}">
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-1">
                                                <h3 class="slds-section-title--divider">POLITICAS APORTES PATRONALES</h3>  
                                            </div>
                                        </div>  
                                        
                                        <apex:outputPanel rendered="{!detalleCaso.Tipo_Politica_Retiro_Saldo_Patronal__c='1'}" >
                                            <div class="slds-form-element__row">
                                                <div class="slds-form-element slds-size--1-of-2">
                                                    <label class="slds-form-element__label" >
                                                        <abbr class="slds-required"></abbr>Fecha de Ingreso a la Empresa</label><br/>
                                                    <apex:outputField rendered="{!case.status !='Nuevo'}"  styleclass="slds-input" value="{!detalleCaso.Fecha_Ingreso_Empresa__c}"/> 
                                                    <apex:inputField type="date" rendered="{!case.status ='Nuevo'}" styleclass="slds-input" value="{!detalleCaso.Fecha_Ingreso_Empresa__c}">
                                                        <apex:actionSupport action="{!calculoSaldoPatronales}" rendered="{!detalleCaso.Fecha_Despido_Empresa__c != null}" reRender="theForm" status="status" event="onchange" />
                                                    </apex:inputField>                                                    
                                                </div>
                                                <div class="slds-form-element slds-size--1-of-2">                                       
                                                    <label class="slds-form-element__label">
                                                        <abbr class="slds-required" ></abbr>Fecha de Despido de la Empresa</label><br/>
                                                    <apex:inputField type="date"  rendered="{!case.status ='Nuevo'}" styleclass="slds-input"  value="{!detalleCaso.Fecha_Despido_Empresa__c}" >
                                                        <apex:actionSupport action="{!calculoSaldoPatronales}" oncomplete="bloquearCampos();" reRender="theForm" status="status" event="onchange" />
                                                    </apex:inputField>
                                                    <apex:outputField rendered="{!case.status !='Nuevo'}" styleclass="slds-input"  value="{!detalleCaso.Fecha_Despido_Empresa__c}" />
                                                    
                                                </div>
                                            </div> 
                                        </apex:outputPanel>
                                        
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-2">
                                                <label class="slds-form-element__label" > Monto Sldo Patronal Ordinario</label><br/>
                                                <!-- apex:inputField styleclass="slds-input" id="montopatOr" value="{!detalleCaso.Monto_Saldo_Patronal__c}" onchange="recalculatePorcentajePO();"/ -->
                                                <apex:inputField styleclass="slds-input" id="montopatOr" value="{!detalleCaso.Monto_Saldo_Patronal__c}">
                                                    <apex:actionSupport action="{!calculoSaldoPatronales2}" reRender="theForm" status="status" event="onchange" onsubmit="recalculatePorcentajePO();" />
                                                </apex:inputField> 
                                            </div>
                                            <div class="slds-form-element slds-size--1-of-2">                                       
                                                <label class="slds-form-element__label">% Saldo Patronal Ordinario</label><br/>
                                                <!-- apex:inputField styleclass="slds-input" id="porcenpatOr" value="{!detalleCaso.Porcentaje_Saldo_Patronal__c}" onchange="recalculateAmountPO();"/ -->
                                                <apex:inputField styleclass="slds-input" id="porcenpatOr" value="{!detalleCaso.Porcentaje_Saldo_Patronal__c}">
                                                    <apex:actionSupport action="{!calculoSaldoPatronales2}" reRender="theForm" status="status" event="onchange" onsubmit="recalculateAmountPO();" />
                                                </apex:inputField>   
                                                <!-- apex:inputText styleClass="slds-input" value="{!detalleCaso02.Monto_saldo__c}" id="patronalOrdi"/ --> 
                                                <apex:inputText styleClass="slds-hidden" value="{!montoPatOrd}" id="patronalOrdi"/>  
                                                <!-- apex:inputText styleClass="slds-input" value="{!montoBrutoRetiro}" id="montoBrutoRetiro"/ -->
                                                <apex:inputText styleClass="slds-hidden" value="{!montoaRetirar}" id="montoaRetirar"/>                                                          
                                            </div>
                                        </div>
                                        
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-2">
                                                <label class="slds-form-element__label" > Monto Sldo Patronal Extraordinario</label><br/>
                                                <!-- apex:inputField styleclass="slds-input" id="montopatExt" value="{!detalleCaso.Monto_Saldo_Patronal_Ext__c}" onchange="recalculatePorcentajePE();"/ -->
                                                <apex:inputField styleclass="slds-input" id="montopatExt" value="{!detalleCaso.Monto_Saldo_Patronal_Ext__c}">
                                                    <apex:actionSupport action="{!calculoSaldoPatronales2}" reRender="theForm" status="status" event="onchange" onsubmit="recalculatePorcentajePE();" />
                                                </apex:inputField> 
                                                <!-- apex:inputText styleClass="slds-input" value="{!detalleCaso03.Monto_saldo__c}" id="patronalExtraOrdi"/ -->
                                                <apex:inputText styleClass="slds-hidden" value="{!montoPatExtOrd}" id="patronalExtraOrdi"/>
                                                <!-- apex:inputText styleClass="slds-input" value="{!detalleCaso04.Monto_Bruto_Retirar_Empresa__c}" id="montoRetiro"/ -->
                                            </div>
                                            <div class="slds-form-element slds-size--1-of-2">                                       
                                                <label class="slds-form-element__label">% Saldo Patronal Extraordinario</label><br/>
                                                <!-- apex:inputField styleclass="slds-input" id="porcenpatExt" value="{!detalleCaso.Porcentaje_Saldo_Patronal_Ext__c}" onchange="recalculateAmountPE();"/ -->
                                                <apex:inputField styleclass="slds-input" id="porcenpatExt" value="{!detalleCaso.Porcentaje_Saldo_Patronal_Ext__c}">
                                                    <apex:actionSupport action="{!calculoSaldoPatronales2}" reRender="theForm" status="status" event="onchange" onsubmit="recalculateAmountPE();" />
                                                </apex:inputField>                                                                                                             
                                            </div>
                                        </div>

                                    </apex:outputPanel>

                                    <!--apex:outputPanel rendered="{!detalleCaso.saldo_prestamo__C != null}"-->
                                     <apex:outputPanel rendered="{!if(detalleCaso.Monto_Pignorado__c != 0,if(detalleCaso.Monto_Pignorado__c != null,true,false),false)}">
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-1">
                                                <h3 class="slds-section-title--divider">PRESTAMO                                        
                                                </h3>   
                                            </div>
                                        </div>    
                                        
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-2">
                                                <label class="slds-form-element__label" >
                                                    <abbr class="slds-required" title="required"></abbr>Monto Pignorado</label><br/>
                                                <apex:outputField styleclass="slds-input" value="{!detalleCaso.Monto_Pignorado__c}"/> 
                                            </div>
                                            <div class="slds-form-element slds-size--2-of-2">                                       
                                                <label class="slds-form-element__label">
                                                    <abbr class="slds-required" ></abbr>Saldo del Prestamo</label><br/>
                                                <div>
                                                    <apex:inputField rendered="{!or(case.status='Nuevo',case.status='Pendiente de aprobación')}" styleclass="slds-input"  value="{!detalleCaso.Saldo_Prestamo__c}" >
                                                        <apex:actionSupport action="{!ModificarSaldoPrestamo}" event="onchange" reRender="theForm" status="status" />
                                                    </apex:inputField>
                                                    <apex:outputField rendered="{!IF(case.status !='Nuevo',if(case.status !='Pendiente de aprobación',true,false),false)}" styleclass="slds-input"  value="{!detalleCaso.Saldo_Prestamo__c}" />
                                                </div>                                                               
                                            </div>
                                        </div>                              
                                    </apex:outputPanel>
                                    <apex:outputPanel id="idsubProductos" rendered="{!AND(case.status !='Pendiente de aprobación',case.status !='Pendiente segunda aprobación')}">
                                    <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-1">
                                                
                                                <h3 class="slds-section-title--divider"><!--apex:outputPanel> <apex:inputField styleclass="slds-input" value="{!detalleCaso.Aplica_Cambio_Sub_Producto_desde_Retiros__c}" >  
                                                        <apex:actionSupport action="{!accionVacia2}" event="onchange"  />
                                                    </apex:inputField></apex:outputPanel-->CAMBIO DE SUB-PRODUCTO       
                                                    <apex:inputField style="width:100px;height:30px;" value="{!detalleCaso.Aplica_Cambio_Sub_Producto_desde_Retiros__c}" >  
                                                        <apex:actionSupport action="{!accionVacia2}" event="onchange"  />
                                                    </apex:inputField>
                                                    
                                                </h3>   
                                            </div>
                                        </div>  
                                    
                                    <!--apex:outputpanel-->
                                    <apex:outputpanel rendered="{!detalleCaso.Aplica_Cambio_Sub_Producto_desde_Retiros__c}"> 
                                        <fieldset class="slds-form--compound ">
                                            <div class="slds-form-element__group">
                                                
                                                <div class="slds-form-element__row">
                                                    <div class="slds-form-element slds-size--1-of-2">
                                                        <label class="slds-form-element__label" >
                                                           Motivo del Caso</label><br/>
                                                        Retención
                                                    </div>
                                                    <div class="slds-form-element slds-size--2-of-2">
                                                        <!--label class="slds-form-element__label">Producto</label><br/ >
                                                        <apex:outputField styleclass="slds-input" value="{!cuentaCliente.Producto__r.Name}" /--> 
                                                    </div>
                                                </div>
                                                
                                                <div class="slds-form-element__row">
                                                    <div class="slds-form-element slds-size--1-of-2">
                                                        <label class="slds-form-element__label" >
                                                            <abbr class="slds-required" title="required">*</abbr>Acción</label><br/>
                                                        <apex:inputField styleclass="slds-input" value="{!detalleCaso.Accion__c}"><!-- required="true"-->
                                                            <apex:actionSupport event="onchange" action="{!accionSubproducto}"/>
                                                        </apex:inputField> 
                                                    </div>
                                                    <div class="slds-form-element slds-size--2-of-2">
                                                        <label class="slds-form-element__label">Producto</label><br/ >
                                                        <apex:outputField rendered="{!detalleCaso.Producto_Anterior__c =null}" styleclass="slds-input" value="{!cuentaCliente.Producto__r.Name}" /> 
                                                        <apex:outputField rendered="{!detalleCaso.Producto_Anterior__c !=null}" styleclass="slds-input" value="{!detalleCaso.Producto_Anterior__c}" /> 
                                                    </div>
                                                </div>
                                                
                                                <div class="slds-form-element__row">
                                                    <div class="slds-form-element slds-size--1-of-2">
                                                        <label class="slds-form-element__label" >Cuenta Colectiva</label><br/>
                                                        <apex:outputField rendered="{!OR(Caso.status !='Cerrado', detalleCaso.Detalle_Cuenta_colectiva__c =null)}" styleclass="slds-input" value="{!cuentaCliente.Detalle_Cuenta_colectiva__c}" /> 
                                                        <apex:outputField rendered="{!AND(Caso.status ='Cerrado', detalleCaso.Detalle_Cuenta_colectiva__c !=null)}" styleclass="slds-input" value="{!detalleCaso.Detalle_Cuenta_colectiva__c}" /> 
                                                    </div>
                                                    <div class="slds-form-element slds-size--2-of-2">
                                                        <apex:outputPanel rendered="{!if(detalleCaso.Accion__c = 'A1',true,false)}">
                                                            <label class="slds-form-element__label">Nueva Cuenta colectiva</label><br/>
                                                            <div class="slds-input-has-icon slds-input-has-icon--right">                                   
                                                                <apex:commandLink action="{!buscarCuentaC}">
                                                                    <svg class="slds-input__icon" aria-hidden="true">                                            
                                                                        <use xlink:href="{!URLFOR($Resource.SLDS221, '/assets/icons/utility-sprite/svg/symbols.svg#search')}"></use>                                           
                                                                    </svg>
                                                                </apex:commandLink>
                                                                <apex:outputField styleclass="slds-input" value="{!detalleCaso.Detalle_Cuenta_colectiva__c}" />
                                                            </div>  
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                                
                                                <div class="slds-form-element__row">
                                                    <div class="slds-form-element slds-size--1-of-2">
                                                        <label class="slds-form-element__label" >Subproducto</label><br/>
                                                        <!--apex:outputField styleclass="slds-input" value="{!cuentaCliente.Detalle_Subproducto__c}" /--> 
                                                        <apex:outputField rendered="{!OR(Caso.status !='Cerrado', detalleCaso.Detalle_subproducto2__c =null)}" styleclass="slds-input" value="{!cuentaCliente.Detalle_Subproducto__c}" /> 
                                                        <apex:outputField rendered="{!AND(Caso.status ='Cerrado', detalleCaso.Detalle_subproducto2__c !=null)}" styleclass="slds-input" value="{!detalleCaso.Detalle_subproducto2__c}" />
                                                    </div>
                                                    <div class="slds-form-element slds-size--2-of-2">
                                                        <label class="slds-form-element__label">Nuevo Subproducto</label><br/>
                                                        <div class="slds-input-has-icon slds-input-has-icon--right">                                   
                                                            <apex:commandLink action="{!buscarSubPro}" rendered="{!detalleCaso.Accion__c != 'A1'}" >
                                                                <svg class="slds-input__icon" aria-hidden="true">                                            
                                                                    <use xlink:href="{!URLFOR($Resource.SLDS221, '/assets/icons/utility-sprite/svg/symbols.svg#search')}"></use>                                           
                                                                </svg>
                                                            </apex:commandLink>
                                                            <apex:outputField styleclass="slds-input" value="{!detalleCaso.Detalle_subproducto__c}" />
                                                        </div>  
                                                    </div>
                                                </div>
                                                
                                            </div>
                                        </fieldset>                                                       
                                    </apex:outputpanel>
                                    </apex:outputPanel>
                                    
                                        
                                        <!-- <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-2">
                                                <label class="slds-form-element__label" >
                                                    <abbr class="slds-required" title="required"></abbr>Monto Pignorado</label><br/>
                                                <apex:outputField styleclass="slds-input" value="{!detalleCaso.Monto_Pignorado__c}"/> 
                                            </div>
                                            <div class="slds-form-element slds-size--2-of-2">                                       
                                                <label class="slds-form-element__label">
                                                    <abbr class="slds-required" ></abbr>Saldo del Prestamo</label><br/>
                                                <div>
                                                    <apex:inputField rendered="{!or(case.status='Nuevo',case.status='Pendiente de aprobación')}" styleclass="slds-input"  value="{!detalleCaso.Saldo_Prestamo__c}" >
                                                        <apex:actionSupport action="{!ModificarSaldoPrestamo}" event="onchange" reRender="theForm" status="status" />
                                                    </apex:inputField>
                                                    <apex:outputField rendered="{!IF(case.status !='Nuevo',if(case.status !='Pendiente de aprobación',true,false),false)}" styleclass="slds-input"  value="{!detalleCaso.Saldo_Prestamo__c}" />
                                                </div>                                                               
                                            </div>
                                        </div> -->          
                                    
                                    <div class="slds-form-element__row">
                                        <div class="slds-form-element slds-size--1-of-1">
                                            <h3 class="slds-section-title--divider">SALDOS A RETIRAR                                        
                                            </h3>   
                                        </div>
                                    </div>                                              
                                    <apex:DataTable value="{!cuentasCaso}" id="idtableSaldos" var="item" styleClass="slds-table slds-table--bordered">
                                        <apex:column headerValue="Saldo">
                                            <apex:OutputField value="{!item.Saldo_retirar__c}"/>                                                                                                           
                                        </apex:column>  
                                        <apex:column headerValue="Monto del Saldo">
                                            <apex:OutputField value="{!item.Monto_saldo__c}"/>                                                                                                         
                                        </apex:column>  
                                        <apex:column headerValue="Monto a retirar" rendered="{!detalleCaso.Tipo_retiro__c == '51'}">
                                            <!-- apex:inputField value="{!item.Monto_retirar__c}" 
                                                             rendered="{!OR(AND(item.Saldo_retirar__c = '12', detalleCaso.Permitir_Retiro_Saldos_Patronales__c),
                                                                       AND(item.Saldo_retirar__c != '12', item.Saldo_retirar__c != '13'))}" >
                                                <apex:actionSupport rendered="{!OR(AND(item.Saldo_retirar__c = '12', detalleCaso.Permitir_Retiro_Saldos_Patronales__c))}"
                                                                    action="{!ValidacionSaldoPatronales}" event="onchange" reRender="theForm" status="status" >
                                                    <apex:param assignTo="{!tipoSaldo}" value="{!item.Saldo_retirar__c}" name="Validaciones" />
                                                </apex:actionSupport>
                                            </apex:inputField -->
                                            <apex:inputField value="{!item.Monto_retirar__c}">
                                                <apex:actionSupport rendered="{!OR(AND(item.Saldo_retirar__c = '12', detalleCaso.Permitir_Retiro_Saldos_Patronales__c),item.Saldo_retirar__c = '13')}"
                                                                    action="{!ValidacionSaldoPatronales}" event="onchange" reRender="idtableSaldos" status="status" >
                                                    <apex:param assignTo="{!tipoSaldo}" value="{!item.Saldo_retirar__c}" name="Validaciones" />
                                                </apex:actionSupport>
                                            </apex:inputField>
                                            
                                            <!-- apex:outputField value="{!item.Monto_retirar__c}" 
                                                              rendered="{!OR(AND(item.Saldo_retirar__c = '12', !detalleCaso.Permitir_Retiro_Saldos_Patronales__c),item.Saldo_retirar__c == '13')}" / -->                                                                                                            
                                        </apex:column>                                                                              
                                    </apex:DataTable> 
                                    <div class="slds-form-element__row">
                                        <div class="slds-form-element slds-size--1-of-2">
                                            <label class="slds-form-element__label" >Saldo total de la cuenta</label><br/>
                                            <apex:OutputField value="{!detalleCaso.Saldo_total__c}"/>
                                        </div>
                                        <div class="slds-form-element slds-size--2-of-2">                                       
                                            <label class="slds-form-element__label">Monto bruto a retirar</label><br/>
                                            <apex:outputField styleclass="slds-input" value="{!detalleCaso.Monto_bruto_retirar__c}" />                                                                   
                                        </div>
                                    </div>  
                                    <div class="slds-form-element__row">
                                        <div class="slds-form-element slds-size--1-of-2">
                                            <label class="slds-form-element__label" >Comisiones y cargos </label><br/>
                                            <apex:OutputField value="{!detalleCaso.Monto_total_comisiones_recargos__c}"/>
                                        </div>
                                        <div class="slds-form-element slds-size--2-of-2">                                       
                                            <label class="slds-form-element__label" >Monto neto a retirar</label><br/>
                                            <apex:OutputField value="{!detalleCaso.Monto_total_retirar__c}"/>                                                                
                                        </div>
                                    </div>
                                    <div class="slds-form-element__row">
                                        <div class="slds-form-element slds-size--1-of-2">
                                            <label class="slds-form-element__label">Exonerado en este caso</label><br/>
                                            <apex:outputField styleclass="slds-input" value="{!detalleCaso.Exonerado__c}" />
                                        </div> 
                                        <div class="slds-form-element slds-size--1-of-2">
                                            <label class="slds-form-element__label">Monto exonerado al día de hoy</label><br/>
                                            <div class="slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_info" role="alert">
                                                <span class="slds-assistive-text">info</span>
                                                <span class="slds-icon_container slds-icon-utility-user slds-m-right_x-small" />
                                                <!-- apex:outputField styleclass="slds-input" value="{!detalleCaso.Total_exonerado__c}" / -->
                                                <apex:outputText value="HNL{0, number, ###,###,##0.##}">
                                                    <apex:param value="{!detalleCaso.Total_exonerado__c}" />
                                                </apex:outputText>
                                                
                                            </div>
                                        </div>                                                              
                                    </div>
                                    
                                    <apex:outputPanel rendered="{!detalleCaso.Se_lleva_Parte_Patronal__c}">
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-1">
                                                <h3 class="slds-section-title--divider">RETIRO PARTE PATRONAL                                        
                                                </h3>   
                                            </div>
                                        </div>  
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-2">
                                                <label class="slds-form-element__label">Monto Bruto a retirar</label><br/>
                                                <apex:outputField styleclass="slds-input" value="{!detalleCaso.Monto_Bruto_Retirar_Empresa__c}" />
                                            </div> 
                                            <div class="slds-form-element slds-size--2-of-2">
                                                <label class="slds-form-element__label">Monto neto a retirar</label><br/>
                                                <apex:outputField styleclass="slds-input" value="{!detalleCaso.Monto_Neto_Retirar_Empresa__c}" />
                                            </div>                                                              
                                        </div>
                                        
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-2">
                                                <label class="slds-form-element__label">Comisiones y cargos</label><br/>
                                                <apex:outputField styleclass="slds-input" value="{!detalleCaso.Total_Cargos_Empresa__c}" />
                                            </div> 
                                            <div class="slds-form-element slds-size--2-of-2">
                                                 <label class="slds-form-element__label">Forma de Pago</label><br/>
                                                <apex:outputField styleclass="slds-input" value="{!cuentaCliente.Cuenta_colectiva2__r.Tipo_Cuenta__c}" />
                                            </div>                                                              
                                        </div>
                                        
                                    </apex:outputPanel>
                                    
                                    <div id="pagosBT" style="{!pagosBT}">
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-1">
                                                <h3 class="slds-section-title--divider">PAGO A BENEFICIARIOS / TERCEROS</h3>  
                                                <!-- apex:inputText styleClass="slds-INPUT" value="{!montoaRetirar}" id="montoaRetirar2"/ -->
                                            </div>
                                        </div> 
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-1">
                                                <abbr class="slds-required">*</abbr><label class="slds-form-element__label">Elija la opción</label><br/>
                                                <!-- apex:inputField style="width: 5% !important;" styleclass="slds-input" value="{!detalleCaso.Pago_terceros__c}" / -->
                                                <!-- <apex:inputField styleclass="slds-input" style="width: 5% !important;" value="{!detalleCaso.Pago_terceros__c}" >
                                                    <apex:actionSupport event="onchange" action="{!verBeneficiarios2}"/>
                                                </apex:inputField> -->                                            
                                                <apex:inputField id="tipoPago" style="width: 100% !important;" styleclass="slds-input" value="{!detalleCaso.Tipo_pago__c}">
                                                    <apex:actionSupport event="onchange" action="{!verBeneficiarios2}"/>
                                                </apex:inputField>
                                            </div>                                            
                                        </div>
                                        <div class="slds-form-element__row">
                                            <apex:commandButton action="{!verBeneficiarios2}" styleClass="slds-button slds-button_brand" value="Ver Registros" id="theButton"/>
                                            <!-- apex:commandButton action="{!verBeneficiarios2}" styleClass="slds-button slds-button_brand" value="Ver Registros">
                                                <apex:param name="MS_Item" value="{!detalleCaso.Tipo_pago__c}" assignTo="{!detalleCaso.Tipo_pago__c}" />
                                            </apex:commandButton -->
                                        </div>
                                    </div>                                  
                                                                    
                                </div>
                            </fieldset>                 
                        </apex:outputpanel>
                        
                        <!-- REVERSIONES -->
                        <apex:outputpanel rendered="{!cTipoCaso.reversiones}">              
                            <fieldset class="slds-form--compound ">
                                <div class="slds-form-element__group">
                                    <div class="slds-form-element__row">
                                        <div class="slds-form-element slds-size--1-of-2">
                                            <label class="slds-form-element__label" >
                                                <abbr class="slds-required" title="required">*</abbr>Tipo de Transacción</label>
                                            <apex:inputField styleclass="slds-input" value="{!detalleCaso.Tipo_transaccion__c}" required="true"/> 
                                        </div>
                                        <div class="slds-form-element slds-size--2-of-2">
                                            <label class="slds-form-element__label">
                                                <abbr class="slds-required" title="required">*</abbr>Subtipo de Transacción</label><br/>
                                            <apex:inputField styleclass="slds-input" id="subtipoTransacion"  value="{!detalleCaso.Subtipo_transaccion__c}" required="true"  >
                                                <apex:actionSupport immediate="true" action="{!Mostrar}" event="onchange" />
                                            </apex:inputField> 
                                        </div>
                                    </div>
                                    
                                    <apex:outputPanel rendered="{!mostrarReversionesDife}">
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-2">
                                                <label class="slds-form-element__label">
                                                   Tipo de Saldo</label><br/>
                                                <apex:inputField styleclass="slds-input" required="true" value="{!detalleCaso.Tipo_Saldo__c}"/> 
                                            </div>
                                            <div class="slds-form-element slds-size--2-of-2">
                                                <div class="slds-form-element__row">
                                                    <div class="slds-form-element slds-size--1-of-2">
                                                        <label class="slds-form-element__label">
                                                            Monto a Acreditar</label><br/>
                                                        <!--apex:inputText styleclass="slds-input" value="{!detalleCaso.Rendimiento__c}" disabled="{!mostrarMonto}" /-->
                                                        <apex:inputText styleclass="slds-input" required="true" value="{!detalleCaso.Monto_reversar__c}" disabled="{!mostrarMonto}" >
                                                            <!--apex:actionSupport event="onchange" action="{!cambioMonto}" /-->
                                                        </apex:inputText>
                                                    </div>
                                                    <div class="slds-form-element slds-size--2-of-2">
                                                        <br/><br/> <label class="slds-form-element__label">
                                                        <abbr class="slds-required" title="required">*</abbr>Cobrar Comisión</label>
                                                        <apex:inputCheckbox value="{!detalleCaso.Cobrar_comision__c}"/> 
                                                        
                                                    </div>
                                                </div> 
                                                <!--apex:outputPanel rendered="{!caso.mostrar_tasa_cambio__c ='Si'}" >
                                                    <div class="slds-form-element__row">
                                                        <div class="slds-form-element slds-size--1-of-2">
                                                            <label class="slds-form-element__label">
                                                                Tasa</label><br/>
                                                            <apex:outputField value="{!caso.Tasa_Cambio__c}" /> 
                                                        </div>
                                                        <div class="slds-form-element slds-size--2-of-2">
                                                            <br/> 
                                                             {!IF(monedaCuenta = 'USD','Comprar de dólares','Venta de dólares')}
                                                           
                                                        </div>
                                                    </div> 
                                                </apex:outputPanel-->
                                            </div>
                                        </div>  
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-2">
                                                Fecha de Depósito<br/>
                                                <apex:inputField style="width:50%;" styleClass="slds-input" rendered="{!case.status ='Nuevo'}" showDatePicker="false" type="date" value="{!detalleCaso.Fecha_Deposito__c}" />
                                                <apex:outputField rendered="{!case.status !='Nuevo'}" value="{!detalleCaso.Fecha_Deposito__c}" />
                                            </div>
                                            <div class="slds-form-element slds-size--2-of-2">
                                               
                                            </div>
                                        </div>
                                        <apex:outputPanel rendered="{!caso.mostrar_tasa_cambio__c ='Si'}" >
                                            <div class="slds-form-element__row">
                                                <div class="slds-form-element slds-size--1-of-2">
                                                    Tipo de Transacción: {!IF(monedaCuenta = 'USD','Compra de Dólares','Venta de Dólares')}<br/>
                                                    <apex:outputPanel rendered="{!caso.Tasa_Cambio__c !=null}">
                                                        <br/>
                                                            Tasa<br/>
                                                        <apex:outputText value="HNL {!caso.Tasa_Cambio__c}" /> 
                                                    </apex:outputPanel>
                                                </div>
                                                <div class="slds-form-element slds-size--2-of-2">
                                                    <!--br/> 
                                                    {!IF(monedaCuenta = 'USD','Comprar de dólares','Venta de dólares')}-->
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                    
                                    <apex:outputPanel rendered="{!MostrarFecha}">
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-2">
                                                <label class="slds-form-element__label" >
                                                    <abbr class="slds-required" title="required">*</abbr>Fecha desde</label>
                                                <apex:inputField type="date" styleclass="slds-input"  value="{!detalleCaso.Fecha_desde__c}"/>
                                            </div>
                                            <div class="slds-form-element slds-size--2-of-2">
                                                <label class="slds-form-element__label" >
                                                    <abbr class="slds-required" title="required">*</abbr>Fecha hasta</label>
                                                <apex:inputField type="date" styleclass="slds-input"  value="{!detalleCaso.Fecha_hasta__c}"/>
                                            </div>
                                        </div>
                                    </apex:outputPanel>
                                    
                                    <apex:outputPanel rendered="{!MostrarReversiones}">
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-2">
                                                <label class="slds-form-element__label" >Descripcion</label><br/>
                                                <apex:outputField styleclass="slds-input" value="{!detalleCaso.Descripcion__c}" /> 
                                            </div>
                                            <div class="slds-form-element slds-size--2-of-2">
                                                <label class="slds-form-element__label">Monto a reversar</label><br/>
                                                <apex:outputField styleclass="slds-input" value="{!detalleCaso.Monto_reversar__c}"/> 
                                            </div>
                                            <div class="slds-form-element slds-size--1-of-2">
                                                <label class="slds-form-element__label" >Fecha de realización</label><br/>
                                                <apex:outputField styleclass="slds-input" value="{!detalleCaso.Fecha_aporte__c}" /> 
                                            </div>
                                        </div>
                                        
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-2">
                                                <label class="slds-form-element__label" >Comisión por aporte</label><br/>
                                                <apex:outputField styleclass="slds-input" value="{!detalleCaso.Monto_comision_aporte__c}" /> 
                                            </div>
                                            <div class="slds-form-element slds-size--2-of-2">
                                                <label class="slds-form-element__label">Cobrar comisión por aporte</label><br/>
                                                <apex:outputField styleclass="slds-input" value="{!detalleCaso.Comision_por_aporte__c}"/> 
                                            </div>
                                        </div>
                                        
                                        <div class="slds-form-element__row">
                                            <div class="slds-form-element slds-size--1-of-2">
                                                <label class="slds-form-element__label" >Comisión por saldo</label><br/>
                                                <apex:outputField styleclass="slds-input" value="{!detalleCaso.Monto_comision_saldo__c}" /> 
                                            </div>
                                            <div class="slds-form-element slds-size--2-of-2">
                                                <label class="slds-form-element__label" >Rendimiento</label><br/>
                                                <apex:outputField styleclass="slds-input" value="{!detalleCaso.Rendimiento__c}" /> 
                                            </div>
                                        </div> 
                                    </apex:outputPanel>
                                </div>
                            </fieldset> 
                            
                        </apex:outputpanel>
                        <apex:outputPanel rendered="{!mostrarbonotes}">                   
                            <div class="slds-form-element__row">
                                <div class="slds-form-element slds-size--1-of-1">
                                    <br/><apex:commandButton value="Ver Movimientos" action="{!verMovimientos}"  styleClass="slds-input slds-button--neutral" rendered="{!cTipoCaso.reversiones}" />
                                </div>
                            </div>
                        </apex:outputPanel>
                        <br/>
                        <apex:outputPanel rendered="{!if(movimientoSeleccionado !=null,if(detallecaso.Subtipo_transaccion__c !='C1',true,false),false)}">
                            <apex:DataTable value="{!movimientoSeleccionado}"   var="item" styleClass="slds-table slds-table--bordered">
                                <apex:column headerValue="Fecha Valor a Reversar">       
                                    <apex:OutputField value="{!item.Fecha__c}" /> 
                                </apex:column>
                                <apex:column rendered="{!if(detallecaso.Subtipo_transaccion__c !='C2',if(detallecaso.Subtipo_transaccion__c !='C3',if(detallecaso.Subtipo_transaccion__c !='C7',true,false),false),false)}" headerValue="Tipo de Saldo">
                                    <apex:OutputField value="{!item.Tipo_Saldo__c}"/>                         
                                </apex:column>
                                
                                <apex:column headerValue="Monto">
                                    <apex:OutputText value="{!item.Monto__c}"/>   
                                </apex:column>
                                
                                <!--apex:column headerValue="Saldo Inicial">
                                    <apex:OutputText value="{!item.Saldo_Inicial__c}"/>                        
                                </apex:column>
                                <apex:column headerValue="% Comisión Aporte">
                                    <apex:OutputText value="{!item.Comision_por_aporte__c}"/>                           
                                </apex:column>
                                <apex:column headerValue="% Comisión Saldo">
                                    <apex:OutputText value="{!item.Comision_por_saldo__c}"/>                        
                                </apex:column>
                                <apex:column headerValue="Valor Cuota">
                                    <apex:OutputText value="{!item.Valor_Cuota__c}"/>                          
                                </apex:column-->
                            </apex:DataTable> 
                        </apex:outputPanel>
                        
                        <!----------------------------DETALLE DE MOVIMIENTO PARA ACREDITACION DE RENDIMIENTO---->
                        
                       <apex:outputPanel rendered="{!detallecaso.Subtipo_transaccion__c ='C1'}">
                            <apex:DataTable value="{!movimientoSeleccionado}"   var="item" styleClass="slds-table slds-table--bordered">
                                <apex:column headerValue="Fecha Valor a Reversar">       
                                    <apex:inputField type="date" value="{!item.Fecha__c}" /> 
                                </apex:column>
                                <apex:column rendered="{!if(detallecaso.Subtipo_transaccion__c !='C2',if(detallecaso.Subtipo_transaccion__c !='C3',if(detallecaso.Subtipo_transaccion__c !='C7',true,false),false),false)}" headerValue="Tipo de Saldo">
                                    <apex:outputField value="{!item.Tipo_Saldo__c}"/>                         
                                </apex:column>
                                
                                <apex:column headerValue="Monto">
                                    <apex:inputText value="{!item.Monto__c}">
                                        <!--apex:actionSupport status="status" reRender="theForm" event="onchange" action="{!cambioMontoC1}" /-->
                                    </apex:inputText>
                                </apex:column>
                            </apex:DataTable> 
                        </apex:outputPanel>
                        
                        <!-- <apex:outputPanel rendered="{!MostartablaMovimientos}">
                            <div class="slds-form-element__row">
                                <div class="slds-form-element slds-size--1-of-1">
                                    <br/> <table   styleClass="slds-table slds-table--bordered">
                                    <head>
                                        <tr>
                                            <th scope="col"> <div class="slds-truncate">Fecha</div></th>
                                            <th scope="col"><div class="slds-truncate">Descripción</div> </th>
                                            <th scope="col"><div class="slds-truncate">Monto</div></th>
                                        </tr>
                                    </head>
                                    <body>
                                        
                                        <tr>
                                            <td scope="col"><div class="slds-truncate"><apex:outputText value="{0, date, dd-MM-YYYY}">
                                                <apex:param value="{!Fecha}" /> 
                                                </apex:outputText></div></td>
                                            <td scope="col"><div class="slds-truncate"><apex:OutputText value="{!Descripcion}"/></div></td>
                                            <td scope="col"><div class="slds-truncate"><apex:OutputText value="{!Monto}"/></div></td>
                                        </tr>
                                        
                                    </body>
                                    
                                    </table> 
                                    
                                </div>
                            </div>
                        </apex:outputPanel> -->
                        
                        
                        <apex:outputPanel rendered="{!if(mostrarReversionesDifeabajo,if(movimientoSeleccionado !=null,true,false),false)}">
                            <br/>
                            <fieldset class="slds-form--compound ">
                                <div class="slds-form-element__group">
                                    <div class="slds-form-element__row">
                                        <div class="slds-form-element slds-size--1-of-3">
                                            <label class="slds-form-element__label">
                                                <abbr class="slds-required" title="required">*</abbr>Tipo de Saldo</label><br/>
                                            <apex:inputField styleclass="slds-input"  value="{!detalleCaso.Tipo_Saldo__c}">
                                                <apex:actionSupport event="onchange" action="{!cambioTipoSaldo}" />
                                            </apex:inputField>
                                        </div>
                                        <div class="slds-form-element slds-size--2-of-3">
                                            <apex:outputPanel rendered="{!detalleCaso.Subtipo_transaccion__c !='D1'}">
                                                <label class="slds-form-element__label">
                                                    <abbr class="slds-required" title="required">*</abbr>Fecha de Cierre</label><br/>
                                                <apex:inputField styleclass="slds-input" type="date" value="{!detalleCaso.Fecha_hasta_Reversar__c }">
                                                    <!--apex:actionSupport action="{!CalculoRendimientoDIario}" status="status" reRender="theForm" event="onchange" /-->
                                                </apex:inputField>
                                            </apex:outputPanel>
                                        </div>
                                         <div class="slds-form-element slds-size--3-of-3">
                                              <!--apex:outputLabel rendered="{!detalleCaso.Subtipo_transaccion__c ='C1'}" > Monto Orig: <apex:inputField style="width:40%;"  value="{!detallecaso.Monto_Original__c}" /></apex:outputLabel>
                                             <apex:outputLabel rendered="{!detalleCaso.Subtipo_transaccion__c !='C1'}" > Monto Original: <apex:outputField value="{!detallecaso.Monto_Original__c}" /></apex:outputLabel--><br/>
                                            <apex:commandButton styleClass="slds-button slds-button--brand" rendered="{!if(mostrarGuardar,if(detalleCaso.Subtipo_transaccion__c !='D1', true, false),false)}" value="Calcular" action="{!CalculoRendimientoDIario}" status="status" reRender="theForm"  />
                                        </div>
                                        <div class="slds-form-element slds-size--2-of-2">
                                            <div class="slds-form-element__row">
                                                <div class="slds-form-element slds-size--1-of-2">
                                                    <label class="slds-form-element__label">
                                                        <abbr class="slds-required" title="required">*</abbr>Monto a Acreditar</label><br/>
                                                    <apex:inputField styleclass="slds-input" required="true" value="{!detalleCaso.Monto_reversar__c}"    >
                                                        <!--apex:actionSupport event="onchange" action="{!cambioMonto}" /-->
                                                    </apex:inputField>
                                                </div>
                                                <div class="slds-form-element slds-size--2-of-2">
                                                    <label class="slds-form-element__label">
                                                       <apex:outputLabel rendered="{!detalleCaso.Tipo_transaccion__c ='A1'}"> <abbr class="slds-required" title="required">*</abbr>Cobrar Comisión</apex:outputLabel></label>
                                                        <apex:inputCheckbox rendered="{!detalleCaso.Tipo_transaccion__c ='A1'}" value="{!detalleCaso.Cobrar_comision__c}"/> 
                                                    
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </fieldset>          
                        </apex:outputPanel>
                        
                        
                        <apex:outputPanel rendered="{!if(movimientoSeleccionado !=null,if(mostrarReversionesDifeabajo=false,true,false),false)}">
                            <br/>
                            <fieldset class="slds-form--compound ">
                                <div class="slds-form-element__group">
                                    <div class="slds-form-element__row">
                                        <div class="slds-form-element slds-size--1-of-2">
                                            <label class="slds-form-element__label">
                                                <abbr class="slds-required" title="required">*</abbr>Tipo de Saldo</label><br/>
                                            <apex:inputField styleclass="slds-input" required="true" value="{!detalleCaso.Tipo_Saldo__c}">
                                                <!--apex:actionSupport event="onchange" action="{!cambioTipoSaldo}" /-->
                                            </apex:inputField>
                                        </div>
                                        <div class="slds-form-element slds-size--2-of-2">
                                            <div class="slds-form-element__row">
                                                <div class="slds-form-element slds-size--1-of-2">
                                                    <label class="slds-form-element__label">
                                                        <abbr class="slds-required" title="required">*</abbr>Monto a Acreditar</label><br/>
                                                    <apex:inputField styleclass="slds-input" required="true" value="{!detalleCaso.Monto_reversar__c}"    >
                                                        <!--apex:actionSupport event="onchange" action="{!cambioMonto}" /-->
                                                    </apex:inputField>
                                                </div>
                                                <div class="slds-form-element slds-size--2-of-2">
                                                    <label class="slds-form-element__label">
                                                        <apex:outputLabel rendered="{!detalleCaso.Tipo_transaccion__c ='A1'}"> <abbr class="slds-required" title="required">*</abbr>Cobrar Comisión</apex:outputLabel></label>
                                                        <apex:inputCheckbox rendered="{!detalleCaso.Tipo_transaccion__c ='A1'}" value="{!detalleCaso.Cobrar_comision__c}"/> 
                                                    
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </fieldset>          
                        </apex:outputPanel>
                        
                        
                        
                        
                        
                        
                    </fieldset>
                    <fieldset class="slds-form--compound ">
                        <div class="slds-form-element__group">
                            <div class="slds-form-element__row">
                                <div class="slds-form-element slds-size--1-of-2">   </div>
                                <div class="slds-form-element slds-size--2-of-2">
                                    <br/>
                                    <apex:commandButton value="Guardar" action="{!guardar}" styleClass="slds-button slds-button--brand"
                                                        rendered="{!AND(mostrarGuardar, !cTipoCaso.reversiones)}"/>
                                    <apex:commandButton value="Guardar" action="{!guardarReversiones}" styleClass="slds-button slds-button--brand"
                                                        rendered="{!AND(mostrarGuardar, cTipoCaso.reversiones)}" />
                                                        
                                    <!-- apex:commandButton value="Ver Beneficiarios" action="{!verBeneficiarios2}" styleClass="slds-button slds-button--neutral"/ -->                     
                                                        
                                </div>
                            </div>
                        </div>
                    </fieldset>
                    <!-- BENEFICIARIOS -->
                    <apex:outputpanel rendered="{!cTipoCaso.actInformacion}" id="tablaBenes">
                        <br/>                                                           
                        
                        <apex:DataTable value="{!cuentasCaso}" var="item" styleClass="slds-table slds-table_bordered">  
                            <apex:column > 
                                <apex:actionRegion >
                                    <apex:commandLink action="{!eliminarCuenta}" Value="Eliminar" reRender="tablaBenes">
                                        <apex:param name="pBene" value="{!item.Indice__c}" assignTo="{!indiceEliminar}"/>     
                                    </apex:commandLink>
                                </apex:actionRegion>
                            </apex:column>                         
                            <apex:column headerValue="Primer nombre" > 
                                <apex:inputField value="{!item.Primer_Nombre__c}" required="true"/>                           
                            </apex:column>                
                            <apex:column headerValue="Segundo nombre" >
                                <apex:inputField value="{!item.Segundo_Nombre__c}"/>                           
                            </apex:column>   
                            <apex:column headerValue="Primer apellido" > 
                                <apex:inputField value="{!item.Primer_Apellido__c}" required="true"/>                           
                            </apex:column>  
                            <apex:column headerValue="Segundo apellido" > 
                                <apex:inputField value="{!item.Segundo_Apellido__c}"/>                           
                            </apex:column>
                            <apex:column headerValue="Tipo ID" > 
                                <apex:inputField value="{!item.Tipo_identificacion__c}"/>                           
                            </apex:column> 
                            <apex:column headerValue="Identificacion" > 
                                <apex:inputField value="{!item.Identificacion__c}"/>                           
                            </apex:column> 
                            <apex:column headerValue="Parentesco" >
                                <apex:inputField value="{!item.Parentesco__c}" required="true"/>                           
                            </apex:column>  
                            <apex:column headerValue="Grado" >
                                <apex:inputField value="{!item.Grado_parentesco__c}" required="true"/>                           
                            </apex:column>  
                            <apex:column headerValue="Porcentaje" > 
                                <apex:inputField value="{!item.Porcentaje__c}" required="true"/>                           
                            </apex:column> 
                            <apex:column headerValue="Sexo" > 
                                <apex:inputField value="{!item.Sexo__c}" required="true"/>                           
                            </apex:column> 
                            <apex:column headerValue="Fecha nacimiento" width="50px"> 
                                <apex:inputField type="date" showDatePicker="true" value="{!item.Fecha_Nacimiento__c}" required="true"/>                           
                            </apex:column>                                                                         
                        </apex:DataTable> 
                    </apex:outputpanel>
                    
                    
                    <!-- CONSTANCIAS -->
                    <apex:outputpanel rendered="{!cTipoCaso.constancias}">
                        <br/>                                       
                        <div class="slds-box slds-align--absolute-center slds-container--medium">   
                            <table class="slds-table slds-table_bordered slds-table_cell-buffer slds-table_striped slds-table_col-bordered">
                                <thead>
                                    <tr class="slds-text-title_caps">
                                        <th scope="col">
                                            <div class="slds-truncate" ></div>
                                        </th>
                                        <th scope="col"> 
                                            <div class="slds-truncate" title="# Cuenta"># Cuenta</div>
                                        </th>
                                        <th scope="col">
                                            <div class="slds-truncate" title="Aportes">Aportes</div>
                                        </th>
                                        <th scope="col">
                                            <div class="slds-truncate" title="Monto">Monto</div>
                                        </th>
                                        <th scope="col">
                                            <div class="slds-truncate" title="Fecha realización">Fecha realización</div>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <apex:repeat value="{!cuentasCaso}" var="item" >
                                        <tr>
                                            <th scope="row">
                                                <div class="slds-truncate">
                                                    <apex:commandLink action="{!eliminarCuenta}" >
                                                        Eliminar
                                                        <apex:param name="pDC1" value="{!item.Cuenta__c}" assignTo="{!idDetalleEliminar}"/>     
                                                    </apex:commandLink> 
                                                </div>
                                            </th>
                                            <td>
                                                <div class="slds-truncate"> <apex:OutputField value="{!item.Cuenta__c}"/>  </div>
                                            </td>
                                            <td>
                                                <div class="slds-truncate">
                                                    <apex:commandLink action="{!verAportes}" >
                                                        Ver
                                                        <apex:param name="pAporte" value="{!item.Cuenta__c}" assignTo="{!idDetalleEliminar}"/>     
                                                    </apex:commandLink> 
                                                </div>
                                            </td>
                                            <td>
                                                <div class="slds-truncate"> <apex:OutputText value="{!item.Nuevo_monto_aporte__c}"/>  </div>
                                            </td>
                                            <td>
                                                <div class="slds-truncate"> <apex:OutputField value="{!item.Fecha_aporte__c}"/>  </div>
                                            </td>
                                        </tr>
                                    </apex:repeat>
                                </tbody>
                            </table>
                        </div>
                    </apex:outputpanel>
                    
                    <apex:outputPanel rendered="{!popCuentaC}">
                        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open slds-modal_large">
                            <div class="slds-modal__container">
                                <div class="slds-modal__header">
                                    <table>
                                        <tr>
                                            <td>CUENTAS COLECTIVAS</td>
                                            <td><apex:inputtext styleclass="slds-input"  value="{!nombreCuenta}" onkeypress="enterPress2(event)"/></td>
                                            <td><div class="slds-button-group" role="group">
                                                <apex:commandLink value="Buscar" id="botonBuscar" styleclass="slds-button slds-button--brand" action="{!buscarCuentaC}"/> 
                                                <apex:commandLink value="Cerrar" styleclass="slds-button slds-button--neutral" action="{!cerrar}"/> 
                                                </div></td>
                                        </tr>
                                    </table>
                                </div>
                                <div class="slds-modal__content">
                                    <apex:DataTable value="{!cuentasColectivas}" var="item" styleClass="slds-table slds-table--bordered">
                                        <apex:column headerValue="Número">
                                            <apex:commandLink action="{!cerrar}"> 
                                                <apex:OutputField value="{!item.Name}"/> 
                                                <apex:param name="pV1" value="{!item.id}" assignTo="{!detalleCaso.Nueva_Cuenta_colectiva2__c}"/>
                                                <apex:param name="pDetC" value="{!item.Name}" assignTo="{!detalleCaso.Detalle_Cuenta_colectiva__c}"/>    
                                                <apex:param name="Algo" value="{!item.Subproducto__c}" assignTo="{!detalleCaso.Nuevo_Subproducto__c}"/>
                                                <apex:param name="pCCSB2" value="{!item.Subproducto__r.Name}" assignTo="{!detalleCaso.Detalle_subproducto__c}"/>                                        
                                            </apex:commandLink>                                 
                                        </apex:column>  
                                        <apex:column Value="{!item.Subproducto__r.Name}" />                                                                               
                                    </apex:DataTable> 
                                </div>
                            </div>
                        </div>
                        <div class="slds-backdrop slds-backdrop--open"></div>
                    </apex:outputPanel>
                    
                     <apex:outputPanel rendered="{!popDolares}">
                        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open slds-modal_large">
                            <div class="slds-modal__container">
                                <div class="slds-modal__header">
                                    <apex:outputText style="font-size:20px;" value="Compra / Venta de Dólares " />
                                </div>
                                <div class="slds-modal__content slds-p-around--medium">
                                    <h3 class="slds-text-heading_medium slds-hyphenate" style="display: {!IF(monedaCuenta = 'USD','block;','none;')}">¿Desea comprar dólares?   </h3>  
                                    <h3 class="slds-text-heading_medium slds-hyphenate" style="display: {!IF(monedaCuenta = 'HNL','block;','none;')}">¿Desea vender dólares?   </h3>  
                              
                                </div>
                                <footer class="slds-modal__footer">
                                    <apex:commandButton value="NO" action="{!No}" styleClass="slds-button slds-button--brand" />
                                    <apex:commandButton value="SI" action="{!Si}" styleClass="slds-button slds-button--brand" />                    
                                </footer>
                            </div>
                        </div>
                        <div class="slds-backdrop slds-backdrop--open"></div>
                    </apex:outputPanel>
                    
                   
                    <apex:outputPanel rendered="{!popRezago}" id="idpopRezago" >
                        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open slds-modal_large">
                            <div class="slds-modal__container">
                                <div class="slds-modal__header">
                                   Caso Reversiones
                                </div>
                                <div class="slds-modal__content slds-p-around--medium">
                                    <table width ="100%">
                                        <tr>
                                            
                                            <td style ="width:50%;">
                                                Rezago<br/>
                                                <apex:selectList style="width:50%;" styleclass="slds-input"  value="{!detalleCaso.Rezago__c}" size="1" >
                                                    <apex:selectOption itemValue="N" itemLabel="No" />
                                                    <apex:selectOption itemValue="S" itemLabel="Si" />
                                                </apex:selectList>
                                                
                                            </td>
                                            <td style ="width:50%;">
                                                Codigo de referencia<br/>
                                                <apex:inputField style="width:50%;" styleclass="slds-input"  value="{!detalleCaso.Cod_Referencia__c}" />
                                            </td>
                                        </tr>
                                    </table>
                                    
                                </div>
                                <footer class="slds-modal__footer">
                                    <apex:commandButton value="Guardar"  action="{!actualizarRezago}" styleClass="slds-button slds-button--brand" />                    
                                </footer>
                            </div>
                        </div>
                        <div class="slds-backdrop slds-backdrop--open"></div>
                    </apex:outputPanel>
                   
                    
                    
                    
                    <apex:outputPanel rendered="{!popSubPro}">
                        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open slds-modal_large">
                            <div class="slds-modal__container">
                                <div class="slds-modal__header">
                                    <table>
                                        <tr>
                                            <td>SUBPRODUCTOS</td>
                                            <td><apex:inputtext styleclass="slds-input"  value="{!nombreSubproducto}" onkeypress="enterPress(event)"/></td>
                                            <td><div class="slds-button-group" role="group">
                                                <apex:commandLink value="Buscar" styleclass="slds-button slds-button--brand" action="{!buscarSubPro}"/> 
                                                <apex:commandLink value="X" styleclass="slds-button slds-button--neutral" action="{!cerrar}"/> 
                                                </div></td>
                                        </tr>
                                    </table>
                                </div>
                                <div class="slds-modal__content slds-p-around--medium">
                                    <apex:DataTable value="{!subProductos}" var="item" styleClass="slds-table slds-table--bordered">
                                        <apex:column headerValue="Nombre">
                                            <apex:commandLink action="{!cerrar}" >
                                                <apex:OutputField value="{!item.Name}"/>
                                                <apex:param name="pV2" value="{!item.id}" assignTo="{!detalleCaso.Nuevo_Subproducto__c}"/> 
                                                <apex:param name="pV2SBN" value="{!item.Name}" assignTo="{!detalleCaso.Detalle_subproducto__c}"/>      
                                            </apex:commandLink> 
                                        </apex:column>
                                        <!-- apex:column headerValue="Nombre">
                                            <apex:OutputField value="{!item.Name}"/>                             
                                        </apex:column -->                                                                                 
                                    </apex:DataTable> 
                                </div>
                            </div>
                        </div>
                        <div class="slds-backdrop slds-backdrop--open"></div>
                    </apex:outputPanel>
                    
                    <apex:outputPanel rendered="{!popAporte}">
                        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open slds-modal_large">
                            <div class="slds-modal__container">
                                <div class="slds-modal__header">
                                    <apex:commandLink action="{!cerrar}" styleclass="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close">
                                        <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">
                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Resource.SLDS221, '/assets/icons/utility-sprite/svg/symbols.svg#close')}"></use>
                                        </svg>
                                        <span class="slds-assistive-text">Cerrar</span>
                                    </apex:commandLink>  
                                    <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">APORTES</h2>
                                </div>
                                <div class="slds-modal__content slds-p-around--medium">
                                    <apex:DataTable value="{!listAportes}" var="item" styleClass="slds-table slds-table--bordered">
                                        <apex:column headerValue="Monto">
                                            <apex:commandLink action="{!selecAporte}" >
                                                <apex:OutputText value="{!item.monto}"/>   
                                                <apex:param name="SctAporte" value="{!item.indice}" assignTo="{!cuentasCaso[0].Nuevo_monto_aporte__c}"/>                                       
                                            </apex:commandLink> 
                                        </apex:column>
                                        <apex:column headerValue="Fecha de realización">
                                            <apex:OutputText value="{!item.fechaAporte}"/>                           
                                        </apex:column>                                                                                 
                                    </apex:DataTable> 
                                </div>
                            </div>
                        </div>
                        <div class="slds-backdrop slds-backdrop--open"></div>
                    </apex:outputPanel>
                    
                    <apex:outputPanel rendered="{!popMovimientos}">
                        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open slds-modal_large">
                            <div class="slds-modal__container">
                                <div class="slds-modal__header">
                                    <apex:commandLink action="{!cerrar}" styleclass="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close">
                                        <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">
                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Resource.SLDS221, '/assets/icons/utility-sprite/svg/symbols.svg#close')}"></use>
                                        </svg>
                                        <span class="slds-assistive-text">Cerrar</span>
                                    </apex:commandLink>  
                                    <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">MOVIMIENTOS</h2>
                                </div>
                                <div class="slds-modal__content slds-p-around--medium">
                                    <apex:DataTable value="{!movimientos}" var="item" styleClass="slds-table slds-table--bordered">
                                        <apex:column headerValue="Fecha">       
                                            <apex:outputText value="{0, date, dd-MM-YYYY}">
                                                <apex:param value="{!item.fecha}" /> 
                                            </apex:outputText>
                                        </apex:column>
                                        <apex:column rendered="{!if(detallecaso.Subtipo_transaccion__c !='C2',if(detallecaso.Subtipo_transaccion__c !='C3',if(detallecaso.Subtipo_transaccion__c !='C7',true,false),false),false)}" headerValue="Tipo de Saldo">
                                            <apex:OutputText value="{!item.descripcion}"/>                         
                                        </apex:column>
                                        
                                        <apex:column headerValue="Monto">
                                            <apex:commandLink action="{!selecMovimiento}" >
                                                <apex:OutputText value="{!item.monto}"/>   
                                                <apex:param name="SctMovi" value="{!item.indice}" assignTo="{!indice}"/>                                       
                                            </apex:commandLink> 
                                        </apex:column>
                                        
                                        <apex:column rendered="false" headerValue="Saldo Inicial">
                                            <apex:OutputText value="{!item.saldoInicial}"/>                        
                                        </apex:column>
                                        <apex:column rendered="false" headerValue="% Comisión Aporte">
                                            <apex:OutputText value="{!item.prcComisionAporte}"/>                           
                                        </apex:column>
                                        <apex:column rendered="false" headerValue="% Comisión Saldo">
                                            <apex:OutputText value="{!item.prcComisionSaldo}"/>                        
                                        </apex:column>
                                        <apex:column rendered="false" headerValue="Valor Cuota">
                                            <apex:OutputText value="{!item.valorCuota}"/>                          
                                        </apex:column>
                                    </apex:DataTable> 
                                </div>
                            </div>
                        </div>
                        <div class="slds-backdrop slds-backdrop--open"></div>
                    </apex:outputPanel>
                                       
                    <apex:outputPanel rendered="{!popBene}">
                    <div style="overflow: auto; width: 100%; height: 200px;">
                        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open slds-modal_large">
                            <div class="slds-modal__container">
                                <div class="slds-modal__header">
                                    <apex:commandLink action="{!cerrar}" styleclass="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close">
                                        <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">
                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Resource.SLDS221, '/assets/icons/utility-sprite/svg/symbols.svg#close')}"></use>
                                        </svg>
                                        <span class="slds-assistive-text">Cerrar</span>
                                    </apex:commandLink>  
                                    
                                    <apex:commandButton value="Agregar Beneficiarios" action="{!agregarBeneficiarios}" styleClass="slds-button slds-button--brand" />
                                    
                                </div>
                                <div class="slds-modal__content slds-p-around--medium">
                                    <apex:pageBlock >
                                        <apex:pageBlockTable value="{!listBeneficiarios}" var="item" >
                                            <apex:column headerValue="Seleccionar">
                                                <apex:inputField value="{!item.Casilla__c}"/>                           
                                            </apex:column> 
                                            <apex:column Value="{!item.Primer_Nombre__c}" />                
                                            <apex:column Value="{!item.Segundo_Nombre__c}" />  
                                            <apex:column Value="{!item.Primer_Apellido__c}" />  
                                            <apex:column Value="{!item.Segundo_Apellido__c}" /> 
                                            <apex:column Value="{!item.Identidad__c}" /> 
                                            <apex:column Value="{!item.Parentesco__c}" /> 
                                            <apex:column Value="{!item.Porcentaje__c}" /> 
                                            <apex:column Value="{!item.Fecha_Nacimiento__c}" /> 
                                            <apex:column Value="{!item.Sexo__c}" /> 
                                            
                                        </apex:pageBlockTable> 
                                    </apex:pageBlock>
                                </div>
                            </div>
                        </div>
                        <div class="slds-backdrop slds-backdrop--open"></div>
                    </div>
                    </apex:outputPanel>
                                        
                    <!-- Beneficiarios caso retiro 03/03/2020 -->
                    <apex:outputPanel rendered="{!popBene2}">
                        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open slds-modal_large">
                            <div class="slds-modal__container">
                                <div class="slds-modal__header">
                                    <apex:commandLink action="{!cerrar}" styleclass="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close">
                                        <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">
                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Resource.SLDS221, '/assets/icons/utility-sprite/svg/symbols.svg#close')}"></use>
                                        </svg>
                                        <span class="slds-assistive-text">Cerrar</span>
                                    </apex:commandLink>  
                                    
                                    <div style="{!CASE($Profile.Name,"Operaciones",'display:none;',"Operaciones y Tecnologia",'display:none;','')}">
                                        <apex:commandButton value="Agregar" action="{!addPagoBene}" styleClass="slds-button slds-button--brand" />
                                        <apex:commandButton value="Siguiente" action="{!upsertBeneficiarios}" styleClass="slds-button slds-button--brand" />
                                    </div>    
                                    
                                </div>
                                <div class="slds-modal__content slds-p-around--medium">
                                    <!-- <apex:pageBlock >
                                        <apex:pageBlockTable value="{!listBeneficiarios}" var="item" >
                                            <apex:column headerValue="Seleccionar">
                                                <apex:inputField value="{!item.Casilla__c}"/>                           
                                            </apex:column> 
                                            <apex:column Value="{!item.Primer_Nombre__c}" />                
                                            <apex:column Value="{!item.Segundo_Nombre__c}" />  
                                            <apex:column Value="{!item.Primer_Apellido__c}" />  
                                            <apex:column Value="{!item.Segundo_Apellido__c}" /> 
                                            <apex:column Value="{!item.Identidad__c}" /> 
                                            <apex:column Value="{!item.Parentesco__c}" /> 
                                            <apex:column Value="{!item.Porcentaje__c}" /> 
                                            <apex:column Value="{!item.Fecha_Nacimiento__c}" /> 
                                            <apex:column Value="{!item.Sexo__c}" /> 
                                            <apex:column Value="{!item.Pago_a_Tercero__c}" />
                                        </apex:pageBlockTable> 
                                    </apex:pageBlock> -->
                                    
                                    <apex:pageBlock id="popBeneficiarios"> 
                                        <apex:variable var="rowNum" value="{!0}"  />         
                                        <apex:pageMessages /> 
                                        <apex:pageBlockTable value="{!listBeneficiarios}" var="item"> 
                                            <apex:column headerValue="">
                                                <apex:commandLink title="Eliminar" style="font-size:15px; font-weight:bold; text-align:center;color:red;" value="X" action="{!delRow}" reRender="popBeneficiarios" rendered="{!rowNum>=0}">
                                                    <apex:param value="{!rowNum}" name="index" />
                                                </apex:commandLink>
                                                <apex:variable var="rowNum" value="{!rowNum+1}"/>    
                                            </apex:column>
                                            <apex:column headerValue="Primer Nombre"> 
                                                <!-- apex:outputText value="{!item.Primer_nombre__c} {!item.Segundo_nombre__c} {!item.Primer_apellido__c} {!item.Segundo_apellido__c}"/ -->
                                                <apex:inputField styleClass="slds-input" value="{!item.Primer_Nombre__c}"/>
                                            </apex:column>
                                            <apex:column headerValue="Segundo Nombre"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Segundo_Nombre__c}"/> 
                                            </apex:column>
                                            <apex:column headerValue="Primer Apellido"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Primer_Apellido__c}"/> 
                                            </apex:column>
                                            <apex:column headerValue="Segundo Apellido"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Segundo_Apellido__c}"/> 
                                            </apex:column>
                                            <apex:column headerValue="Parentesco"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Parentesco__c}"/> 
                                            </apex:column>
                                            <!-- apex:column headerValue="Forma de Retiro"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Forma_Retiro__c}"/> 
                                            </apex:column -->
                                            <!-- apex:column headerValue="Sexo"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Sexo__c}"/> 
                                            </apex:column> 
                                            <!-- apex:column headerValue="Nombre del banco"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Nombre_del_banco__c}"/> 
                                            </apex:column> 
                                            <apex:column headerValue="Número de cuenta destino"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Numero_cuenta_destino__c}"/> 
                                            </apex:column --> 
                                            <!-- apex:column headerValue="Tipo de cuenta"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Tipo_cuenta__c}"/> 
                                            </apex:column> 
                                            <apex:column headerValue="Moneda de la cuenta"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Moneda_cuenta__c}"/> 
                                            </apex:column> 
                                            <!-- apex:column headerValue="Monto bruto"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Monto_bruto__c}"/> 
                                            </apex:column>
                                            <apex:column headerValue="Comisiones y cargos"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Comisiones_cargos__c}"/> 
                                            </apex:column>
                                            <apex:column headerValue="Comisiones y cargos"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Monto_neto_retirar__c}"/> 
                                            </apex:column -->
                                            <apex:column headerValue="Identidad"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Identidad__c}" required="true"/> 
                                            </apex:column>
                                            <!-- apex:column headerValue="Porcentaje" style="width:6%"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Porcentaje__c}"/> 
                                            </apex:column -->
                                        </apex:pageBlockTable> 
                                    </apex:pageBlock> 
                                </div>
                            </div>
                        </div>
                        <div class="slds-backdrop slds-backdrop--open"></div>
                    </apex:outputPanel>
                    
                    <apex:outputPanel rendered="{!popPagoBene}">
                        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open slds-modal_large">
                            <div class="slds-modal__container">
                                <div class="slds-modal__header">
                                    <apex:commandLink action="{!cerrar}" styleclass="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close">
                                        <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">
                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Resource.SLDS221, '/assets/icons/utility-sprite/svg/symbols.svg#close')}"></use>
                                        </svg>
                                        <span class="slds-assistive-text">Cerrar</span>
                                    </apex:commandLink>  
                   
                                    <apex:commandButton value="Guardar" action="{!upsertPagosBeneficiarios}" styleClass="slds-button slds-button--brand" />
                                    
                                </div>
                                <div class="slds-modal__content slds-p-around--medium">
                                <div class="scrolling-wrapper">
                                    <apex:pageBlock id="pagosBenefi"> 
                                        <apex:pageMessages /> 
                                        <div style="text-align:right;">(*) Campos Requeridos</div>
                                        <apex:pageBlockTable value="{!listPagosBeneficiarios}" var="item"> 
                                            <!-- apex:column headerValue="Primer Nombre"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Primer_nombre__c}"/> 
                                            </apex:column>
                                            <apex:column headerValue="Segundo Nombre"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Segundo_nombre__c}"/> 
                                            </apex:column>
                                            <apex:column headerValue="Primer Apellido"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Primer_apellido__c}"/> 
                                            </apex:column>
                                            <apex:column headerValue="Segundo Apellido"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Segundo_apellido__c}"/> 
                                            </apex:column -->
                                            <apex:column headerValue="Nombre Completo"> 
                                                <apex:outputText value="{!item.Primer_nombre__c} {!item.Segundo_nombre__c} {!item.Primer_apellido__c} {!item.Segundo_apellido__c}"/>
                                            </apex:column>
                                            <apex:column headerValue=" "> 
                                                   
                                            </apex:column>
                                            <!-- apex:column headerValue="¿Pago a Tercero?"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Pago_a_Tercero__c}"/> 
                                            </apex:column -->
                                            <apex:column headerValue="(*) Forma de Retiro"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Forma_Retiro__c}" id="formaRetiro"> 
                                                    <apex:actionSupport event="onchange" rerender="pagosBenefi"/> 
                                                </apex:inputField>  
                                            </apex:column>
                                            <apex:column headerValue=" "> 
                                                   
                                            </apex:column>
                                            <apex:column headerValue="Nombre del banco"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Nombre_banco__c}" style="{!CASE(item.Forma_Retiro__c,"EF",'pointer-events:none; background-color:grey;',"CK",'pointer-events:none; background-color:grey;','')}"/> 
                                            </apex:column> 
                                            <apex:column headerValue=" "> 
                                                   
                                            </apex:column>
                                            <apex:column headerValue="Número de cuenta destino"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Numero_cuenta_destino__c}" style="{!CASE(item.Forma_Retiro__c,"EF",'pointer-events:none; background-color:grey;',"CK",'pointer-events:none; background-color:grey;','')}"/> 
                                            </apex:column>
                                            <apex:column headerValue=" "> 
                                                   
                                            </apex:column> 
                                            <apex:column headerValue="Tipo de cuenta"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Tipo_cuenta__c}" style="{!CASE(item.Forma_Retiro__c,"EF",'pointer-events:none; background-color:grey;',"CK",'pointer-events:none; background-color:grey;','')}"/> 
                                            </apex:column> 
                                            <apex:column headerValue=" "> 
                                                   
                                            </apex:column>
                                            <apex:column headerValue="(*) Moneda de la cuenta"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Moneda_cuenta__c}"/> 
                                            </apex:column> 
                                            <apex:column headerValue=" "> 
                                                   
                                            </apex:column>
                                            <apex:column headerValue="(*) Monto bruto"> 
                                                <!-- abbr class="slds-required" title="required" aura:id="emailReq">*</abbr -->
                                                <apex:inputField styleClass="slds-input" value="{!item.Monto_bruto__c}"/> 
                                            </apex:column>
                                            <apex:column headerValue=" "> 
                                                   
                                            </apex:column>
                                            <apex:column headerValue="Porcentaje" style="width:6%"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Porcentaje__c}"/> 
                                            </apex:column>
                                            <apex:column headerValue=" "> 
                                                   
                                            </apex:column>
                                            <apex:column headerValue="Comisiones y cargos"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Comisiones_cargos__c}" style="pointer-events:none; background-color:grey;"/> 
                                            </apex:column>
                                            <apex:column headerValue=" "> 
                                                   
                                            </apex:column>
                                            <apex:column headerValue="Monto Neto a Retirar"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Monto_neto_retirar__c}" style="pointer-events:none; background-color:grey;"/> 
                                            </apex:column>                                            
                                        </apex:pageBlockTable> 
                                    </apex:pageBlock>                                         
                                </div>
                                </div>
                            </div>
                        </div>
                        <div class="slds-backdrop slds-backdrop--open"></div>
                    </apex:outputPanel>
                    
                    <apex:outputPanel rendered="{!popPagoBene2}">
                        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open slds-modal_large">
                            <div class="slds-modal__container">
                                <div class="slds-modal__header">
                                    <apex:commandLink action="{!cerrar}" styleclass="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close">
                                        <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">
                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Resource.SLDS221, '/assets/icons/utility-sprite/svg/symbols.svg#close')}"></use>
                                        </svg>
                                        <span class="slds-assistive-text">Cerrar</span>
                                    </apex:commandLink>  
                                    
                                    <div style="{!CASE($Profile.Name,"Operaciones",'display:none;',"Operaciones y Tecnologia",'display:none;','')}">
                                        <div class="slds-grid slds-grid--align-center" style="{!addRecords}" id="botonesBenTer">
                                          <div><apex:commandButton value="Agregar" action="{!addPagoBene2}" styleClass="slds-button slds-button--brand" /></div>
                                          <div><apex:commandButton value="Guardar" action="{!upsertPagosBeneficiarios}" styleClass="slds-button slds-button--brand" /></div>
                                        </div>
                                    </div>
                                
                                </div>
                                <div class="slds-modal__content slds-p-around--medium">
                                <div class="scrolling-wrapper">
                                    <apex:pageBlock id="pagosBenefi2">
                                        <apex:variable var="rowNum2" value="{!0}"  />  
                                        <apex:pageMessages /> 
                                        <div style="text-align:right;">(*) Campos Requeridos</div>
                                        <apex:pageBlockTable value="{!listPagosBeneficiarios2}" var="item">
                                            <apex:column headerValue="" rendered="{!CASE($Profile.Name,"Operaciones",'display:none;',"Operaciones y Tecnologia",'display:none;','')}">
                                                <apex:commandLink title="Eliminar" style="font-size:15px; font-weight:bold; text-align:center;color:red;" value="X" action="{!delRow2}" reRender="pagosBenefi2" rendered="{!rowNum2>=0}">
                                                    <apex:param value="{!rowNum2}" name="index2" />
                                                </apex:commandLink>
                                                <apex:variable var="rowNum2" value="{!rowNum2+1}"/>    
                                            </apex:column> 
                                            <apex:column headerValue="Primer Nombre"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Primer_nombre__c}"/> 
                                            </apex:column>
                                            <apex:column headerValue=" "> 
                                                   
                                            </apex:column>
                                            <apex:column headerValue="Segundo Nombre"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Segundo_nombre__c}"/> 
                                            </apex:column>
                                            <apex:column headerValue=" "> 
                                                   
                                            </apex:column>
                                            <apex:column headerValue="Primer Apellido"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Primer_apellido__c}"/> 
                                            </apex:column>
                                            <apex:column headerValue=" "> 
                                                   
                                            </apex:column>
                                            <apex:column headerValue="Segundo Apellido"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Segundo_apellido__c}"/> 
                                            </apex:column>
                                            <apex:column headerValue=" "> 
                                                   
                                            </apex:column>
                                            <apex:column headerValue="(*) Forma de Retiro"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Forma_Retiro__c}" id="formaRetiro"> 
                                                    <apex:actionSupport event="onchange" rerender="pagosBenefi2"/> 
                                                </apex:inputField>  
                                            </apex:column>
                                            <apex:column headerValue=" "> 
                                                   
                                            </apex:column>
                                            <apex:column headerValue="Nombre del banco"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Nombre_banco__c}" style="{!CASE(item.Forma_Retiro__c,"EF",'pointer-events:none; background-color:grey;',"CK",'pointer-events:none; background-color:grey;','')}"/> 
                                            </apex:column> 
                                            <apex:column headerValue=" "> 
                                                   
                                            </apex:column>
                                            <apex:column headerValue="Número de cuenta destino"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Numero_cuenta_destino__c}" style="{!CASE(item.Forma_Retiro__c,"EF",'pointer-events:none; background-color:grey;',"CK",'pointer-events:none; background-color:grey;','')}"/> 
                                            </apex:column> 
                                            <apex:column headerValue=" "> 
                                                   
                                            </apex:column>
                                            <apex:column headerValue="Tipo de cuenta"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Tipo_cuenta__c}" style="{!CASE(item.Forma_Retiro__c,"EF",'pointer-events:none; background-color:grey;',"CK",'pointer-events:none; background-color:grey;','')}"/> 
                                            </apex:column> 
                                            <apex:column headerValue=" "> 
                                                   
                                            </apex:column>
                                            <apex:column headerValue="(*) Moneda de la cuenta"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Moneda_cuenta__c}"/> 
                                            </apex:column>
                                            <apex:column headerValue=" "> 
                                                   
                                            </apex:column> 
                                            <apex:column headerValue="(*) Monto bruto"> 
                                                <!-- abbr class="slds-required" title="required" aura:id="emailReq">*</abbr -->
                                                <apex:inputField styleClass="slds-input" value="{!item.Monto_bruto__c}"/> 
                                            </apex:column>
                                            <apex:column headerValue=" "> 
                                                   
                                            </apex:column>
                                            <apex:column headerValue="Porcentaje" style="width:6%"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Porcentaje__c}"/> 
                                            </apex:column>
                                            <apex:column headerValue=" "> 
                                                   
                                            </apex:column>
                                            <apex:column headerValue="Comisiones y cargos"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Comisiones_cargos__c}" style="pointer-events:none; background-color:grey;"/> 
                                            </apex:column>
                                            <apex:column headerValue=" "> 
                                                   
                                            </apex:column>
                                            <apex:column headerValue="Monto Neto a Retirar"> 
                                                <apex:inputField styleClass="slds-input" value="{!item.Monto_neto_retirar__c}" style="pointer-events:none; background-color:grey;"/> 
                                            </apex:column>                                            
                                        </apex:pageBlockTable> 
                                    </apex:pageBlock>                                         
                                </div>
                                </div>
                            </div>
                        </div>
                        <div class="slds-backdrop slds-backdrop--open"></div>
                    </apex:outputPanel>
                    <!-- Fin Beneficiarios caso retiro 03/03/2020 -->
                    
                </div>
                <apex:actionFunction name="Mostrar" action="{!Mostrar}" />
            </apex:form>
        </body>
    </html>
    
</apex:page>